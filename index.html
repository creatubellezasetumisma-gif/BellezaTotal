<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>✨ Lis Belleza Total ✨</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <style>
    :root{--p:#ff69b4;--s:#d68ab1;--a:#a64d79;--l:#fff8fb;--t:#5a2a5c;--w:#fff;--sh:0 4px 15px rgba(0,0,0,0.1);--bg-pattern:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="%23ff69b4" opacity="0.1"/><circle cx="20" cy="20" r="1" fill="%23d68ab1" opacity="0.1"/><circle cx="80" cy="20" r="1" fill="%23d68ab1" opacity="0.1"/><circle cx="20" cy="80" r="1" fill="%23d68ab1" opacity="0.1"/><circle cx="80" cy="80" r="1" fill="%23d68ab1" opacity="0.1"/></svg>');--bg-gradient:linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,248,251,0.9) 50%, rgba(255,240,248,0.85) 100%)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Montserrat,sans-serif;background:var(--bg-gradient), var(--bg-pattern);background-attachment:fixed;color:var(--t);line-height:1.6;overflow-x:hidden;position:relative}body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 80%, rgba(255,105,180,0.05) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(214,138,177,0.05) 0%, transparent 50%);z-index:-1;pointer-events:none}html{scroll-behavior:smooth}.container{max-width:1100px;margin:0 auto;padding:0 20px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.btn{display:inline-block;padding:12px 25px;border-radius:50px;text-decoration:none;font-weight:700;font-size:1rem;transition:all 0.3s ease;cursor:pointer;border:none}.btn-primary{background:var(--w);color:var(--p);box-shadow:var(--sh)}.btn-primary:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.btn-secondary{background:transparent;color:var(--w);border:2px solid var(--w)}.btn-secondary:hover{background:var(--w);color:var(--p)}.btn-accent{background:var(--p);color:var(--w)}.btn-accent:hover{background:var(--a);transform:translateY(-2px)}header{background:linear-gradient(135deg,var(--p),var(--s));color:var(--w);padding:15px 0;position:fixed;width:100%;top:0;z-index:1000;box-shadow:0 2px 10px rgba(0,0,0,0.1)}.header-content{display:flex;justify-content:space-between;align-items:center}.logo{display:flex;align-items:center;position:relative}.logo i{font-size:2rem;color:var(--w);margin-right:10px}.logo h1{font-size:1.5rem;font-weight:900;white-space:nowrap;background:linear-gradient(45deg, #fff, #ffd4e5);-webkit-background-clip: text;-webkit-text-fill-color: transparent;background-clip: text;text-shadow: 0 2px 4px rgba(0,0,0,0.1)}.logo::before{content:'';position:absolute;top:-5px;left:-5px;right:-5px;bottom:-5px;background:linear-gradient(45deg, #ff69b4, #d68ab1, #ff69b4);border-radius:50%;z-index:-1;opacity:0.3;animation:logoGlow 3s ease-in-out infinite}@keyframes logoGlow{0%,100%{transform:scale(1);opacity:0.3}50%{transform:scale(1.05);opacity:0.5}}.nav-desktop{display:flex;gap:15px}.nav-desktop a{color:var(--w);text-decoration:none;padding:8px 12px;font-weight:500;border-radius:20px;transition:all 0.3s ease;font-size:0.9rem;white-space:nowrap}.nav-desktop a:hover{background:rgba(255,255,255,0.2);transform:translateY(-2px)}.user-menu{display:flex;align-items:center;gap:15px}.cart-icon{position:relative;cursor:pointer;transition:transform 0.3s ease}.cart-icon:hover{transform:scale(1.1)}.cart-icon i{font-size:1.5rem}.cart-count{position:absolute;top:-8px;right:-8px;background:#ff4757;color:white;border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:0.75rem;font-weight:700}.menu-toggle{display:none;background:none;border:none;color:var(--w);font-size:1.5rem;cursor:pointer}.nav-mobile{display:none;position:absolute;top:100%;left:0;right:0;background:var(--p);flex-direction:column;padding:15px;box-shadow:0 5px 15px rgba(0,0,0,0.2);gap:10px}.nav-mobile.active{display:flex}.nav-mobile a{color:var(--w);text-decoration:none;padding:10px 15px;font-weight:500;border-radius:10px;transition:all 0.3s ease;font-size:1rem}.nav-mobile a:hover{background:rgba(255,255,255,0.2)}.hero{margin-top:80px;padding:80px 20px;text-align:center;background:linear-gradient(rgba(255,105,180,0.7),rgba(214,138,177,0.7)),url('https://images.unsplash.com/photo-1556228724-cabf8b6e204e?auto=format&fit=crop&w=1950&q=80');background-size:cover;background-position:center;color:var(--w);position:relative;overflow:hidden;min-height:60vh;display:flex;align-items:center;justify-content:center}.hero::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at center,rgba(255,255,255,0.1) 0%,rgba(255,105,180,0.3) 100%);z-index:1}.hero-content{position:relative;z-index:2;max-width:800px;margin:0 auto;text-align:center}.hero h2{font-size:2.8rem;margin-bottom:20px;font-weight:900;text-shadow:0 2px 10px rgba(0,0,0,0.2);animation:fadeInUp 1s ease-out;line-height:1.2}.hero p{font-size:1.3rem;margin-bottom:30px;font-weight:500;text-shadow:0 1px 5px rgba(0,0,0,0.2);animation:fadeInUp 1s ease-out 0.2s;animation-fill-mode:both;line-height:1.4}.hero-buttons{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;animation:fadeInUp 1s ease-out 0.4s;animation-fill-mode:both}main{padding:60px 20px;max-width:1100px;margin:0 auto}section{margin-bottom:60px}h2{font-size:2.2rem;margin-bottom:25px;font-weight:700;color:var(--t);text-align:center;position:relative;padding-bottom:15px}h2::after{content:'';position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:60px;height:4px;background:linear-gradient(to right,var(--p),var(--s));border-radius:2px}#sobre-nosotros{padding:40px 0;background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(255,182,193,0.3)), var(--bg-pattern);border-radius:20px;box-shadow:var(--sh);position:relative;overflow:hidden}#sobre-nosotros::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 70% 30%, rgba(255,105,180,0.05) 0%, transparent 70%);z-index:-1}.sobre-content{display:flex;flex-direction:column;gap:30px}.sobre-texto{text-align:center;margin-bottom:20px}.sobre-texto p{font-size:1.1rem;line-height:1.8;margin-bottom:20px;max-width:800px;margin-left:auto;margin-right:auto}.servicios-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.servicio-item{background:rgba(255,255,255,0.7);padding:20px;border-radius:10px;display:flex;align-items:center;transition:all 0.3s ease}.servicio-item:hover{background:var(--w);transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,0.1)}.servicio-item i{color:var(--p);margin-right:15px;font-size:1.5rem;width:30px;text-align:center}.servicio-item h3{font-size:1.1rem;font-weight:600;margin:0}#galeria{padding:40px 0;position:relative}#galeria::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,0.7),rgba(255,240,248,0.5)), var(--bg-pattern);z-index:-1;border-radius:20px}.galeria-container{position:relative;max-width:1000px;margin:0 auto;overflow:hidden;border-radius:20px;box-shadow:var(--sh)}.galeria-slider{display:flex;transition:transform 0.5s ease}.galeria-slide{min-width:100%;position:relative}.galeria-slide img{width:100%;height:400px;object-fit:cover;display:block}.galeria-caption{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(0,0,0,0.8),transparent);color:var(--w);padding:20px;text-align:center}.galeria-caption h3{font-size:1.3rem;margin-bottom:5px}.galeria-nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.8);color:var(--a);width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s ease;box-shadow:0 2px 10px rgba(0,0,0,0.1)}.galeria-nav:hover{background:var(--w);box-shadow:0 4px 15px rgba(0,0,0,0.2)}.galeria-nav.prev{left:15px}.galeria-nav.next{right:15px}.galeria-indicators{display:flex;justify-content:center;gap:8px;margin-top:20px}.galeria-indicator{width:10px;height:10px;border-radius:50%;background:var(--s);cursor:pointer;transition:all 0.3s ease}.galeria-indicator.active{background:var(--p);transform:scale(1.2)}.admin-galeria-controls{display:none;margin-top:20px;padding:20px;background:#f9f9f9;border-radius:10px;border:2px dashed var(--p)}.admin-galeria-controls.active{display:block}.admin-galeria-controls h3{font-size:1.3rem;margin-bottom:15px;color:var(--a);text-align:center}.galeria-admin-form{display:flex;gap:15px;margin-bottom:20px;flex-wrap:wrap}.galeria-admin-form input{flex:1;min-width:200px;padding:10px;border:1px solid #ddd;border-radius:5px}.galeria-admin-form button{padding:10px 20px;background:var(--p);color:white;border:none;border-radius:5px;cursor:pointer;font-weight:600;transition:all 0.3s ease}.galeria-admin-form button:hover{background:var(--a)}.galeria-imagenes-admin{display:grid;grid-template-columns:repeat(auto-fill, minmax(150px, 1fr));gap:15px}.galeria-imagen-admin-item{position:relative;border-radius:8px;overflow:hidden;box-shadow:0 2px 5px rgba(0,0,0,0.1)}.galeria-imagen-admin-item img{width:100%;height:100px;object-fit:cover;display:block}.galeria-imagen-admin-item .delete-btn{position:absolute;top:5px;right:5px;background:rgba(244, 67, 54, 0.9);color:white;border:none;border-radius:50%;width:25px;height:25px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:12px;transition:all 0.3s ease}.galeria-imagen-admin-item .delete-btn:hover{background:#d32f2f;transform:scale(1.1)}#tienda{padding:40px 0;position:relative}#tienda::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,0.8),rgba(255,248,251,0.6)), var(--bg-pattern);z-index:-1;border-radius:20px}.tienda-intro{text-align:center;margin-bottom:40px}.tienda-intro p{font-size:1.1rem;max-width:800px;margin:0 auto;line-height:1.8}.tienda-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px;margin-bottom:30px}.producto-card{background:var(--w);border-radius:15px;overflow:hidden;box-shadow:0 5px 20px rgba(0,0,0,0.08);transition:all 0.3s ease;position:relative}.producto-card:hover{transform:translateY(-8px);box-shadow:0 10px 30px rgba(0,0,0,0.15)}.producto-imagen{height:200px;overflow:hidden;position:relative}.producto-imagen img{width:100%;height:100%;object-fit:cover;transition:transform 0.5s ease}.producto-card:hover .producto-imagen img{transform:scale(1.1)}.producto-badge{position:absolute;top:10px;right:10px;background:var(--p);color:var(--w);padding:5px 10px;border-radius:20px;font-size:0.75rem;font-weight:600}.producto-info{padding:20px}.producto-info h3{font-size:1.2rem;margin-bottom:8px;color:var(--t)}.producto-info p{font-size:0.9rem;color:#666;margin-bottom:12px;line-height:1.5}.producto-footer{display:flex;justify-content:space-between;align-items:center}.producto-precio{font-size:1.3rem;font-weight:700;color:var(--a)}.producto-btn{background:var(--p);color:var(--w);border:none;padding:8px 16px;border-radius:30px;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.9rem}.producto-btn:hover{background:var(--a);transform:scale(1.05)}.ver-mas-container{text-align:center;margin-top:20px}.ver-mas-btn{background:linear-gradient(135deg,var(--p),var(--s));color:var(--w);border:none;padding:15px 30px;border-radius:50px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(0,0,0,0.2)}.ver-mas-btn:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:2000;align-items:center;justify-content:center;opacity:0;transition:opacity 0.3s ease}.modal.active{display:flex;opacity:1}.modal-content{background:var(--w);padding:30px;border-radius:15px;width:90%;max-width:500px;box-shadow:0 10px 30px rgba(0,0,0,0.3);transform:translateY(-20px);transition:transform 0.3s ease;max-height:80vh;overflow-y:auto}.modal.active .modal-content{transform:translateY(0)}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header h3{font-size:1.5rem;color:var(--t)}.close-modal{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--t);transition:color 0.3s ease}.close-modal:hover{color:var(--p)}.login-form{display:flex;flex-direction:column;gap:15px}.login-form input{padding:12px;border:2px solid #eee;border-radius:10px;font-size:1rem;font-family:Montserrat,sans-serif}.login-form input:focus{border-color:var(--p);outline:none;box-shadow:0 0 0 3px rgba(255,105,180,0.1)}.login-btn-form{background:var(--p);color:var(--w);border:none;padding:12px;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease}.login-btn-form:hover{background:var(--a)}#reserva{padding:40px 0;background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(255,182,193,0.3)), var(--bg-pattern);border-radius:20px;box-shadow:var(--sh);position:relative;overflow:hidden}#reserva::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 30% 70%, rgba(255,105,180,0.05) 0%, transparent 70%);z-index:-1}.reserva-container{display:flex;flex-direction:column;gap:40px}.reserva-form{background:var(--w);padding:25px;border-radius:15px;box-shadow:0 5px 20px rgba(0,0,0,0.08)}.form-group{margin-bottom:20px}.form-group label{display:block;margin-bottom:8px;font-weight:600;color:var(--t);font-size:0.95rem}.form-control{width:100%;padding:12px;border:2px solid #eee;border-radius:10px;font-size:1rem;font-family:Montserrat,sans-serif;transition:all 0.3s ease}.form-control:focus{border-color:var(--p);outline:none;box-shadow:0 0 0 3px rgba(255,105,180,0.1)}.btn-submit{background:var(--p);color:var(--w);border:none;padding:12px 30px;border-radius:50px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;width:100%}.btn-submit:hover{background:var(--a);transform:translateY(-2px);box-shadow:0 5px 15px rgba(166,77,121,0.3)}.reserva-info{padding:20px}.reserva-info h3{font-size:1.4rem;margin-bottom:15px;color:var(--t)}.reserva-info p{margin-bottom:15px;line-height:1.7;font-size:1rem}.contact-item{display:flex;align-items:center;margin-bottom:15px}.contact-item i{font-size:1.2rem;color:var(--p);margin-right:12px;width:25px;text-align:center}.contact-item span{font-size:0.95rem}.confirmacion-reserva{display:none;background:#e8f5e9;border:2px solid #4caf50;border-radius:10px;padding:20px;margin-top:20px;text-align:center}.confirmacion-reserva.active{display:block}.confirmacion-reserva h3{color:#2e7d32;margin-bottom:15px;font-size:1.2rem}.confirmacion-reserva .btn-whatsapp{background:linear-gradient(135deg,#25d366,#128c7e);color:var(--w);border:none;padding:12px 25px;border-radius:50px;font-weight:700;font-size:1rem;cursor:pointer;transition:all 0.3s ease;display:inline-block;text-decoration:none}.confirmacion-reserva .btn-whatsapp:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.admin-panel{display:none;background:#f5f5f5;border-radius:15px;padding:25px;margin-top:30px;position:relative}.admin-panel::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,0.8),rgba(255,248,251,0.6)), var(--bg-pattern);z-index:-1;border-radius:15px}.admin-panel.active{display:block}.admin-panel h3{color:var(--a);margin-bottom:20px;text-align:center;font-size:1.3rem}.admin-producto-item{background:var(--w);padding:20px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.1);margin-bottom:20px;border-left:5px solid var(--p)}.admin-producto-item h4{color:var(--t);margin-bottom:15px;font-size:1.2rem}.admin-form-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;align-items:end;margin-bottom:10px}.admin-form-group{display:flex;flex-direction:column}.admin-form-group label{font-weight:600;color:var(--t);margin-bottom:5px;font-size:0.9rem}.admin-form-group input{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;font-size:0.9rem}.admin-save-btn,.admin-delete-btn{background:var(--p);color:var(--w);border:none;padding:10px 20px;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin-right:10px}.admin-save-btn:hover{background:var(--a);transform:scale(1.02)}.admin-delete-btn{background:#f44336}.admin-delete-btn:hover{background:#d32f2f;transform:scale(1.02)}.admin-add-form{background:var(--w);padding:20px;border-radius:10px;border:2px solid var(--s);margin-top:20px}.admin-add-form h4{color:var(--t);margin-bottom:15px;text-align:center}.admin-add-form-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px}#admin-message{display:none;background:#e8f5e9;border:1px solid #4caf50;color:#2e7d32;padding:10px;border-radius:8px;text-align:center;margin-top:15px;font-weight:500}.testimonios{padding:40px 0;position:relative}.testimonios::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,0.8),rgba(255,240,248,0.6)), var(--bg-pattern);z-index:-1;border-radius:20px}.testimonios-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:25px}.testimonio-card{background:var(--w);border-radius:15px;padding:25px;box-shadow:0 5px 20px rgba(0,0,0,0.08);position:relative;transition:all 0.3s ease}.testimonio-card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(0,0,0,0.15)}.testimonio-card::before{content:'"';position:absolute;top:10px;left:15px;font-size:3.5rem;color:var(--p);opacity:0.2;font-family:serif}.testimonio-text{font-style:italic;margin-bottom:15px;line-height:1.7;position:relative;z-index:1;font-size:1rem}.testimonio-rating{margin-bottom:12px}.testimonio-rating i{color:#ffc107;margin-right:2px;font-size:0.9rem}.testimonio-autor{display:flex;align-items:center}.testimonio-avatar{width:45px;height:45px;border-radius:50%;background:linear-gradient(135deg,var(--p),var(--s));display:flex;align-items:center;justify-content:center;color:var(--w);font-weight:700;margin-right:12px;font-size:1.1rem}.testimonio-info h4{font-size:1rem;margin-bottom:3px;color:var(--t)}.testimonio-info p{font-size:0.85rem;color:#666}.contacto{padding:40px 0;position:relative}.contacto::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,0.8),rgba(255,248,251,0.6)), var(--bg-pattern);z-index:-1;border-radius:20px}.contact-container{display:flex;flex-direction:column;gap:40px}.contact-info h3{font-size:1.4rem;margin-bottom:20px;color:var(--t)}.contact-details{margin-bottom:25px}.contact-details p{margin-bottom:12px;display:flex;align-items:center;font-size:0.95rem}.contact-details i{color:var(--p);margin-right:12px;width:22px}.map-container{border-radius:15px;overflow:hidden;box-shadow:0 5px 20px rgba(0,0,0,0.1);height:350px}.map-container iframe{width:100%;height:100%;border:none}footer{background:linear-gradient(135deg,var(--a),var(--s));color:var(--w);padding:40px 20px 20px;margin-top:60px;position:relative;overflow:hidden}footer::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="white" opacity="0.05"/><circle cx="20" cy="20" r="1" fill="white" opacity="0.05"/><circle cx="80" cy="20" r="1" fill="white" opacity="0.05"/><circle cx="20" cy="80" r="1" fill="white" opacity="0.05"/><circle cx="80" cy="80" r="1" fill="white" opacity="0.05"/></svg>');z-index:0}.footer-content{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:30px;margin-bottom:30px;position:relative;z-index:1}.footer-section h3{font-size:1.2rem;margin-bottom:15px;position:relative;padding-bottom:10px}.footer-section h3::after{content:'';position:absolute;bottom:0;left:0;width:40px;height:2px;background:var(--w)}.footer-section p,.footer-section li{margin-bottom:8px;line-height:1.6;font-size:0.9rem}.footer-section ul{list-style:none;padding:0}.footer-section a{color:rgba(255,255,255,0.8);text-decoration:none;transition:color 0.3s ease}.footer-section a:hover{color:var(--w)}.footer-bottom{text-align:center;padding-top:20px;border-top:1px solid rgba(255,255,255,0.1);font-size:0.85rem;color:rgba(255,255,255,0.7);position:relative;z-index:1}.trabaja-btn{background:linear-gradient(135deg,var(--p),var(--s));color:var(--w);border:none;padding:12px 25px;border-radius:50px;font-weight:700;font-size:1rem;cursor:pointer;transition:all 0.3s ease;display:inline-block;position:absolute;bottom:15px;right:20px}.trabaja-btn:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.cart-modal-content{width:90%;max-width:600px}.cart-item{display:flex;align-items:center;justify-content:space-between;padding:15px 0;border-bottom:1px solid #eee}.cart-item img{width:60px;height:60px;object-fit:cover;border-radius:8px;margin-right:15px}.cart-item-details{flex-grow:1}.cart-item-name{font-weight:600;color:var(--t)}.cart-item-price{color:var(--a)}.cart-total{font-size:1.2rem;font-weight:700;text-align:right;margin-top:20px;color:var(--t)}.cart-checkout-btn{width:100%;padding:15px;background:var(--p);color:var(--w);border:none;border-radius:10px;font-size:1.1rem;font-weight:700;cursor:pointer;margin-top:20px;transition:all 0.3s ease}.cart-checkout-btn:hover{background:var(--a);transform:translateY(-2px)}.empty-cart{text-align:center;padding:40px;color:#999}.cart-remove-btn{background:#f44336;color:white;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;font-size:0.8rem;margin-left:10px}.cart-remove-btn:hover{background:#d32f2f}.checkout-form{margin-top:20px;padding:20px;background:#f9f9f9;border-radius:10px}.checkout-form h4{margin-bottom:15px;color:var(--t);text-align:center}.checkout-form-group{margin-bottom:15px}.checkout-form-group label{display:block;margin-bottom:5px;font-weight:600;color:var(--t)}.checkout-form-group input,.checkout-form-group textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-family:inherit}.checkout-form-group textarea{resize:vertical;min-height:80px}.payment-info{display:none;margin-top:20px;padding:25px;background:#e8f5e9;border-radius:10px;text-align:center;border:2px solid #4caf50;box-shadow:0 4px 15px rgba(0,0,0,0.1)}.payment-info.active{display:block}.payment-info h4{margin-bottom:20px;color:#2e7d32;font-size:1.4rem;font-weight:700}.payment-info p{margin-bottom:15px;color:#333;font-size:1.1rem;line-height:1.5}.payment-info .account-details{background:white;padding:20px;border-radius:10px;margin:20px 0;font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.payment-info .account-details p{margin-bottom:12px;font-size:1.1rem}.payment-info .whatsapp-btn{display:inline-block;background:#25d366;color:white;padding:15px 30px;border-radius:50px;text-decoration:none;font-weight:700;margin-top:20px;transition:all 0.3s ease;font-size:1.1rem;box-shadow:0 4px 10px rgba(0,0,0,0.2)}.payment-info .whatsapp-btn:hover{background:#128c7e;transform:translateY(-3px);box-shadow:0 6px 15px rgba(0,0,0,0.3)}.tienda-modal-content{width:95%;max-width:1200px;max-height:90vh;overflow-y:auto}.tienda-modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid var(--p)}.tienda-modal-header h3{font-size:1.8rem;color:var(--t);margin:0}.tienda-modal-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:25px}.tienda-filtros{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap;justify-content:center}.filtro-btn{padding:8px 15px;background:#f0f0f0;border:1px solid #ddd;border-radius:20px;cursor:pointer;transition:all 0.3s ease;font-size:0.9rem}.filtro-btn:hover,.filtro-btn.active{background:var(--p);color:white;border-color:var(--p)}.admin-content-editor{display:none;background:#f9f9f9;border-radius:15px;padding:25px;margin-top:30px;border:2px dashed var(--p);position:relative}.admin-content-editor::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,0.8),rgba(255,248,251,0.6)), var(--bg-pattern);z-index:-1;border-radius:15px}.admin-content-editor.active{display:block}.admin-content-editor h3{color:var(--a);margin-bottom:20px;text-align:center;font-size:1.3rem}.editor-section{margin-bottom:25px;padding:20px;background:var(--w);border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.1)}.editor-section h4{color:var(--t);margin-bottom:15px;font-size:1.1rem;border-bottom:2px solid var(--p);padding-bottom:8px}.editor-form-group{margin-bottom:15px}.editor-form-group label{display:block;margin-bottom:5px;font-weight:600;color:var(--t);font-size:0.9rem}.editor-form-group input,.editor-form-group textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-family:inherit;font-size:0.95rem}.editor-form-group textarea{resize:vertical;min-height:80px}.editor-actions{display:flex;gap:10px;justify-content:center;margin-top:15px}.editor-btn{padding:10px 20px;border:none;border-radius:5px;font-weight:600;cursor:pointer;transition:all 0.3s ease}.editor-btn-save{background:var(--p);color:var(--w)}.editor-btn-save:hover{background:var(--a)}.editor-btn-cancel{background:#ccc;color:var(--t)}.editor-btn-cancel:hover{background:#999}.testimonio-editor-item{background:var(--w);padding:15px;border-radius:10px;margin-bottom:15px;box-shadow:0 2px 5px rgba(0,0,0,0.1)}.testimonio-editor-item h5{color:var(--p);margin-bottom:10px;font-size:1rem}.contact-editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px}.contact-editor-full{grid-column:1 / -1}.file-upload{margin-bottom:15px}.file-upload label{display:block;margin-bottom:5px;font-weight:600;color:var(--t);font-size:0.9rem}.file-upload input[type="file"]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-family:inherit;font-size:0.9rem}.file-upload .file-info{margin-top:5px;font-size:0.8rem;color:#666}.admin-table{width:100%;border-collapse:collapse;margin-top:20px;background:var(--w);border-radius:10px;overflow:hidden;box-shadow:0 2px 5px rgba(0,0,0,0.1)}.admin-table th{background:var(--p);color:var(--w);padding:12px;text-align:left;font-weight:600}.admin-table td{padding:12px;border-bottom:1px solid #eee}.admin-table tr:hover{background:#f9f9f9}.admin-table .status-badge{display:inline-block;padding:4px 8px;border-radius:12px;font-size:0.8rem;font-weight:600}.status-badge.pending{background:#fff3cd;color:#856404}.status-badge.confirmed{background:#d4edda;color:#155724}.status-badge.cancelled{background:#f8d7da;color:#721c24}.admin-actions-cell{display:flex;gap:5px}.admin-actions-cell button{padding:5px 10px;border:none;border-radius:5px;cursor:pointer;font-size:0.8rem;font-weight:600;transition:all 0.3s ease}.admin-actions-cell .delete-btn{background:#dc3545;color:white}.admin-actions-cell .delete-btn:hover{background:#c82333}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media(max-width:992px){.hero h2{font-size:2.5rem}.hero p{font-size:1.1rem}.servicios-grid{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}}@media(max-width:768px){header{padding:12px 0}.header-content{justify-content:space-between}.logo h1{font-size:1.3rem}.menu-toggle{display:block}.nav-desktop{display:none}.hero{margin-top:70px;padding:60px 15px}.hero h2{font-size:2.2rem}.hero p{font-size:1rem}.hero-buttons{flex-direction:column;align-items:center;width:100%;max-width:300px;margin:0 auto}.btn{width:100%}h2{font-size:1.9rem}.galeria-slide img{height:300px}.footer-content{grid-template-columns:1fr;text-align:center}.trabaja-btn{position:relative;bottom:auto;right:auto;margin-top:20px}}@media(max-width:576px){.logo h1{font-size:1.1rem}.logo i{font-size:1.6rem}.hero{padding:50px 15px;min-height:50vh}.hero h2{font-size:1.8rem}.hero p{font-size:0.9rem}.hero-buttons{gap:10px}.btn{padding:10px 20px;font-size:0.9rem}h2{font-size:1.7rem}.galeria-slide img{height:250px}.servicios-grid{grid-template-columns:1fr}.tienda-grid{grid-template-columns:1fr}.testimonios-grid{grid-template-columns:1fr}.reserva-container{gap:30px}.map-container{height:250px}.admin-form-grid,.admin-add-form-grid{grid-template-columns:1fr}.cart-item{flex-direction:column;text-align:center}.tienda-modal-grid{grid-template-columns:1fr}.contact-editor-grid{grid-template-columns:1fr}}
    
    /* Estilos específicos para admin en móvil */
    @media(max-width:768px) {
      .admin-panel {padding: 15px;margin: 20px 0;}
      .admin-panel h3 {font-size: 1.1rem;margin-bottom: 15px;}
      .admin-producto-item {padding: 15px;margin-bottom: 15px;}
      .admin-producto-item h4 {font-size: 1rem;margin-bottom: 10px;}
      .admin-form-grid {grid-template-columns: 1fr;gap: 10px;}
      .admin-form-group {margin-bottom: 10px;}
      .admin-form-group label {font-size: 0.85rem;margin-bottom: 5px;}
      .admin-form-group input {padding: 8px;font-size: 0.9rem;}
      .admin-save-btn, .admin-delete-btn {padding: 8px 15px;font-size: 0.85rem;margin-right: 5px;}
      .admin-add-form {padding: 15px;}
      .admin-add-form h4 {font-size: 1rem;margin-bottom: 10px;}
      .admin-add-form-grid {grid-template-columns: 1fr;gap: 10px;}
      .btn-submit {padding: 10px 20px;font-size: 0.9rem;}
      .admin-table {font-size: 0.85rem;overflow-x: auto;display:block;white-space: nowrap;}
      .admin-table th, .admin-table td {padding: 8px 4px;font-size: 0.75rem;}
      .admin-table th {font-size: 0.8rem;}
      .admin-table .status-badge {padding: 2px 4px;font-size: 0.7rem;}
      .admin-actions-cell {flex-direction: column;gap: 3px;}
      .admin-actions-cell button {width: 100%;padding: 6px;font-size: 0.75rem;}
    }
    
    /* Estilos para el botón de inicio/cierre de sesión en el footer */
    .footer-login-section {display: flex;justify-content: center;align-items: center;gap: 15px;margin-top: 20px;}
    .footer-login-btn, .footer-logout-btn {background: rgba(255,255,255,0.2);color: var(--w);border: none;padding: 8px 15px;border-radius: 20px;cursor: pointer;font-weight: 600;transition: all 0.3s ease;font-size: 0.9rem;}
    .footer-login-btn:hover, .footer-logout-btn:hover {background: rgba(255,255,255,0.3);}
    .footer-user-info {display: none;align-items: center;gap: 10px;}
    .footer-user-info.active {display: flex;}
    
    /* Estilos para la lista de productos en la tabla de pedidos */
    .product-list-cell {
      max-width: 300px;
    }
    
    .product-list-cell .product-item {
      font-size: 0.85rem;
      padding: 4px 0;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .product-list-cell .product-item:last-child {
      border-bottom: none;
    }
    
    .product-list-cell .product-name {
      font-weight: 500;
      color: var(--t);
    }
    
    .product-list-cell .product-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 2px;
    }
    
    .product-list-cell .product-price {
      color: var(--a);
      font-weight: 600;
    }
    
    .product-list-cell .product-quantity {
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 10px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    /* Estilos mejorados para el carrito */
    .cart-item-quantity {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #f8f8f8;
      padding: 4px;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
    }
    
    .cart-item-quantity button {
      background: var(--p);
      color: var(--w);
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .cart-item-quantity button:hover {
      background: var(--a);
      transform: scale(1.05);
    }
    
    .cart-item-quantity button:active {
      transform: scale(0.95);
    }
    
    .cart-item-quantity button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    .cart-item-quantity span {
      min-width: 30px;
      text-align: center;
      font-weight: 600;
      color: var(--t);
      font-size: 14px;
    }
    
    /* Selector de cantidad mejorado */
    .quantity-selector {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #f8f8f8;
      padding: 4px;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
    }
    
    .quantity-selector button {
      background: var(--p);
      color: var(--w);
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .quantity-selector button:hover {
      background: var(--a);
      transform: scale(1.05);
    }
    
    .quantity-selector button:active {
      transform: scale(0.95);
    }
    
    .quantity-selector button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    .quantity-selector input {
      width: 50px;
      text-align: center;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-weight: 600;
      color: var(--t);
      font-size: 14px;
    }
    
    .quantity-selector input:focus {
      outline: none;
      border-color: var(--p);
    }
    
    /* Animaciones para el carrito */
    @keyframes cartItemUpdate {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); background-color: #fff0f5; }
      100% { transform: scale(1); }
    }
    
    .cart-item-updating {
      animation: cartItemUpdate 0.3s ease;
    }
    
    /* Notificaciones mejoradas */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      z-index: 10000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.success {
      background: linear-gradient(135deg, #4caf50, #45a049);
    }
    
    .notification.error {
      background: linear-gradient(135deg, #f44336, #da190b);
    }
    
    .notification.info {
      background: linear-gradient(135deg, #2196f3, #1976d2);
    }
    
    /* Elementos decorativos flotantes */
    .floating-element {
      position: fixed;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(255,105,180,0.1), rgba(214,138,177,0.1));
      z-index: -1;
      pointer-events: none;
      animation: float 20s infinite ease-in-out;
    }
    
    .floating-element:nth-child(1) {
      width: 80px;
      height: 80px;
      top: 10%;
      left: 10%;
      animation-delay: 0s;
    }
    
    .floating-element:nth-child(2) {
      width: 120px;
      height: 120px;
      top: 70%;
      right: 10%;
      animation-delay: 5s;
    }
    
    .floating-element:nth-child(3) {
      width: 60px;
      height: 60px;
      bottom: 10%;
      left: 30%;
      animation-delay: 10s;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(30px, -30px) rotate(90deg); }
      50% { transform: translate(-20px, 20px) rotate(180deg); }
      75% { transform: translate(-30px, -20px) rotate(270deg); }
    }
    
    /* Loading spinner */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Loading overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    
    .loading-overlay.active {
      display: flex;
    }
    
    .loading-overlay .loading {
      width: 50px;
      height: 50px;
      border: 5px solid var(--p);
      border-top-color: transparent;
    }
    
    /* Contenedor de carga para secciones */
    .section-loading {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 200px;
    }
    
    .section-loading .loading {
      width: 40px;
      height: 40px;
      border: 4px solid var(--p);
      border-top-color: transparent;
    }
    
    /* Estilos para imágenes con error */
    .img-error {
      background: #f8f8f8;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 0.9rem;
      text-align: center;
      padding: 10px;
    }
  </style>
</head>
<body>
  <!-- Loading overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading"></div>
  </div>
  
  <!-- Elementos decorativos flotantes -->
  <div class="floating-element"></div>
  <div class="floating-element"></div>
  <div class="floating-element"></div>
  
  <a href="#main-content" class="sr-only">Saltar al contenido principal</a>
  <header>
    <div class="container header-content">
      <div class="logo">
        <i class="fas fa-sparkles"></i>
        <h1>✨ Lis Belleza Total ✨</h1>
      </div>
      <nav class="nav-desktop">
        <a href="#sobre-nosotros">👑 Sobre Nosotros</a>
        <a href="#galeria">📸 Galería</a>
        <a href="#tienda">🛍️ Tienda</a>
        <a href="#reserva">📅 Reserva</a>
        <a href="#testimonios">💬 Opiniones</a>
        <a href="#contacto">📍 Contacto</a>
      </nav>
      <div class="user-menu">
        <div class="cart-icon" onclick="toggleCart()" tabindex="0" role="button" aria-label="Carrito de compras">
          <i class="fas fa-shopping-bag"></i><span class="cart-count" id="cart-count">0</span>
        </div>
      </div>
      <button class="menu-toggle" id="menuToggle" aria-label="Menú móvil" aria-expanded="false">
        <i class="fas fa-bars"></i>
      </button>
      <nav class="nav-mobile" id="navMobile">
        <a href="#sobre-nosotros">👑 Sobre Nosotros</a>
        <a href="#galeria">📸 Galería</a>
        <a href="#tienda">🛍️ Tienda</a>
        <a href="#reserva">📅 Reserva</a>
        <a href="#testimonios">💬 Opiniones</a>
        <a href="#contacto">📍 Contacto</a>
      </nav>
    </div>
  </header>
  <section class="hero" aria-labelledby="hero-title">
    <div class="hero-content">
      <h2 id="hero-title">💄 ¡Resplandece con confianza!</h2>
      <p>Agenda tu cita y déjate consentir 💖</p>
      <div class="hero-buttons">
        <a href="#reserva" class="btn btn-primary">✨ Reserva ahora ✨</a>
        <a href="#tienda" class="btn btn-secondary">🛍️ Ver productos</a>
      </div>
    </div>
  </section>
  <main id="main-content">
    <section id="sobre-nosotros" data-aos="fade-up" aria-labelledby="about-title">
      <h2 id="about-title">👑 ¿Quiénes somos?</h2>
      <div class="sobre-content">
        <div class="sobre-texto">
          <p id="sobre-parrafo1">En <strong>Lis Belleza Total</strong> ofrecemos más que servicios: brindamos una experiencia personalizada, con amor por el detalle y pasión por la belleza. 🌷</p>
          <p id="sobre-parrafo2">Nuestro equipo de expertos está comprometido con hacer que te sientas hermosa y confiada en cada visita. Utilizamos productos de alta calidad y las últimas técnicas para garantizar resultados excepcionales.</p>
        </div>
        <div class="servicios-grid">
          <div class="servicio-item"><i class="fas fa-spa"></i><h3>Tratamientos faciales y corporales</h3></div>
          <div class="servicio-item"><i class="fas fa-hand-sparkles"></i><h3>Manicura & Pedicura moderna</h3></div>
          <div class="servicio-item"><i class="fas fa-palette"></i><h3>Maquillaje profesional</h3></div>
          <div class="servicio-item"><i class="fas fa-cut"></i><h3>Corte y peinados personalizados</h3></div>
          <div class="servicio-item"><i class="fas fa-paint-brush"></i><h3>Coloración y mechas</h3></div>
          <div class="servicio-item"><i class="fas fa-sun"></i><h3>Depilación con cera</h3></div>
          <div class="servicio-item"><i class="fas fa-eye"></i><h3>Diseño de cejas y pestañas</h3></div>
          <div class="servicio-item"><i class="fas fa-user-tie"></i><h3>Asesoría de imagen</h3></div>
          <div class="servicio-item"><i class="fas fa-hot-tub"></i><h3>Tratamientos de spa</h3></div>
        </div>
      </div>
    </section>
    <section id="galeria" data-aos="fade-up" aria-labelledby="gallery-title">
      <h2 id="gallery-title">📸 Momentos de Belleza</h2>
      <div class="galeria-container">
        <div class="galeria-slider" id="galeria-slider" aria-live="polite"></div>
        <button class="galeria-nav prev" onclick="changeSlide(-1)" aria-label="Imagen anterior"><i class="fas fa-chevron-left"></i></button>
        <button class="galeria-nav next" onclick="changeSlide(1)" aria-label="Imagen siguiente"><i class="fas fa-chevron-right"></i></button>
      </div>
      <div class="galeria-indicators" id="galeria-indicators" role="tablist"></div>
      <div class="admin-galeria-controls" id="admin-galeria-controls">
        <h3>📷 Administrar Galería</h3>
        <div class="galeria-admin-form">
          <input type="text" id="galeria-img-url" placeholder="URL de la imagen">
          <input type="text" id="galeria-img-title" placeholder="Título de la imagen">
          <input type="text" id="galeria-img-desc" placeholder="Descripción (auto-generada)" readonly>
          <button onclick="añadirImagenGaleria()">Añadir Imagen</button>
        </div>
        <div class="galeria-imagenes-admin" id="galeria-imagenes-admin"></div>
      </div>
    </section>
    <section id="tienda" data-aos="fade-up" aria-labelledby="shop-title">
      <h2 id="shop-title">🛍️ Nuestra Tienda de Productos Capilares</h2>
      <div class="tienda-intro">
        <p id="tienda-intro-texto">Descubre nuestra selección exclusiva de productos capilares de Dipaso. Formulados con ingredientes de alta calidad para mantener tu cabello saludable y radiante.</p>
      </div>
      <div class="tienda-grid" id="tienda-grid"></div>
      <div class="ver-mas-container">
        <button class="ver-mas-btn" onclick="abrirTiendaCompleta()">Ver todos los productos</button>
      </div>
    </section>
    <div class="modal" id="tiendaModal" role="dialog" aria-labelledby="tienda-modal-title" aria-hidden="true">
      <div class="modal-content tienda-modal-content">
        <div class="tienda-modal-header">
          <h3 id="tienda-modal-title">🛍️ Todos Nuestros Productos</h3>
          <button class="close-modal" id="closeTiendaModal" aria-label="Cerrar modal">&times;</button>
        </div>
        <div class="tienda-filtros">
          <button class="filtro-btn active" onclick="filtrarProductos('todos')">Todos</button>
          <button class="filtro-btn" onclick="filtrarProductos('shampoo')">Shampoo</button>
          <button class="filtro-btn" onclick="filtrarProductos('acondicionador')">Acondicionador</button>
          <button class="filtro-btn" onclick="filtrarProductos('tratamiento')">Tratamiento</button>
          <button class="filtro-btn" onclick="filtrarProductos('accesorio')">Accesorios</button>
        </div>
        <div class="tienda-modal-grid" id="tienda-modal-grid"></div>
      </div>
    </div>
    <section id="admin-productos" class="admin-panel" data-aos="fade-up" aria-labelledby="admin-title">
      <h2 id="admin-title">⚙️ Administrar Productos</h2>
      <div id="admin-lista-productos"></div>
      <div class="admin-add-form">
        <h4>➕ Añadir Nuevo Producto</h4>
        <form id="form-agregar-producto">
          <div class="admin-add-form-grid">
            <div class="admin-form-group"><label for="new-name">Nombre del Producto:</label><input type="text" id="new-name" required></div>
            <div class="admin-form-group"><label for="new-price">Precio (USD):</label><input type="text" id="new-price" required></div>
            <div class="admin-form-group" style="grid-column: 1 / -1;"><label for="new-image">URL de la Imagen:</label><input type="text" id="new-image" required></div>
          </div>
          <button type="submit" class="btn-submit">Añadir Producto</button>
        </form>
      </div>
      <div id="admin-message"></div>
    </section>
    
    <!-- Panel de Administración de Pedidos -->
    <section id="admin-pedidos" class="admin-panel" data-aos="fade-up">
      <h2>📦 Administrar Pedidos</h2>
      <div id="admin-pedidos-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>ID Pedido</th>
              <th>Fecha</th>
              <th>Cliente</th>
              <th>Teléfono</th>
              <th>Dirección</th>
              <th>Total</th>
              <th>Estado</th>
              <th>Productos</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="admin-pedidos-tbody">
            <!-- Los pedidos se cargarán dinámicamente -->
          </tbody>
        </table>
      </div>
    </section>
    
    <!-- Panel de Administración de Reservas -->
    <section id="admin-reservas" class="admin-panel" data-aos="fade-up">
      <h2>📅 Administrar Reservas</h2>
      <div id="admin-reservas-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Nombre</th>
              <th>Teléfono</th>
              <th>Servicio</th>
              <th>Fecha Reserva</th>
              <th>Hora</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="admin-reservas-tbody">
            <!-- Las reservas se cargarán dinámicamente -->
          </tbody>
        </table>
      </div>
    </section>
    
    <!-- Panel de Administración de Solicitudes de Trabajo -->
    <section id="admin-solicitudes" class="admin-panel" data-aos="fade-up">
      <h2>💼 Administrar Solicitudes de Trabajo</h2>
      <div id="admin-solicitudes-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Nombre Completo</th>
              <th>Teléfono</th>
              <th>Email</th>
              <th>CV</th>
              <th>Cédula</th>
              <th>Comentarios</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="admin-solicitudes-tbody">
            <!-- Las solicitudes se cargarán dinámicamente -->
          </tbody>
        </table>
      </div>
    </section>
    
    <section id="reserva" data-aos="fade-up" aria-labelledby="reservation-title">
      <h2 id="reservation-title">📅 Reserva tu cita</h2>
      <div class="reserva-container">
        <div class="reserva-form">
          <form id="form-reserva" novalidate>
            <div class="form-group"><label for="nombre">Nombre completo:</label><input type="text" id="nombre" name="nombre" class="form-control" required></div>
            <div class="form-group"><label for="telefono">Teléfono:</label><input type="tel" id="telefono" name="telefono" value="+593" class="form-control" required></div>
            <div class="form-group"><label for="servicio">Servicio que deseas:</label><select id="servicio" name="servicio" class="form-control" required><option value="">-- Selecciona un servicio --</option><option value="Tratamiento capilar profesional">Tratamiento capilar profesional</option><option value="Corte y peinado">Corte y peinado</option><option value="Coloración y mechas">Coloración y mechas</option><option value="Tratamiento de keratina">Tratamiento de keratina</option><option value="Botox capilar">Botox capilar</option><option value="Reconstrucción capilar">Reconstrucción capilar</option><option value="Alisado brasileño">Alisado brasileño</option><option value="Asesoría de imagen capilar">Asesoría de imagen capilar</option></select></div>
            <div class="form-group"><label for="fecha">Fecha preferida:</label><input type="date" id="fecha" name="fecha" class="form-control" required></div>
            <div class="form-group"><label for="hora">Hora preferida:</label><input type="time" id="hora" name="hora" class="form-control" required></div>
            <button type="submit" class="btn-submit">Enviar Reserva</button>
          </form>
          <div class="confirmacion-reserva" id="confirmacion-reserva">
            <h3>¡Reserva enviada con éxito!</h3>
            <p>Por favor, confirma tu cita a través de WhatsApp:</p>
            <button id="btn-whatsapp-confirm" class="btn-whatsapp" onclick="confirmarReservaWhatsApp()"><i class="fab fa-whatsapp"></i> Confirmar Cita</button>
          </div>
        </div>
        <div class="reserva-info">
          <h3 id="reserva-info-titulo">¿Por qué reservar con nosotros?</h3>
          <p id="reserva-info-texto">En Lis Belleza Total, nos aseguramos de que cada visita sea una experiencia inolvidable. Nuestros profesionales están capacitados para ofrecerte los mejores servicios capilares adaptados a tus necesidades.</p>
          <div class="contact-item"><i class="fas fa-phone"></i><span id="reserva-telefono">+593 99 304 5286</span></div>
          <div class="contact-item"><i class="fas fa-envelope"></i><span id="reserva-email">creatubelleza@gmail.com</span></div>
          <div class="contact-item"><i class="fas fa-map-marker-alt"></i><span id="reserva-direccion">Calle 123 #45-67, Bogotá, Colombia</span></div>
        </div>
      </div>
    </section>
    <section id="testimonios" data-aos="fade-up" aria-labelledby="testimonials-title">
      <h2 id="testimonials-title">💬 Opiniones de nuestras clientas</h2>
      <div class="testimonios-grid" id="testimonios-grid">
        <!-- Los testimonios se cargarán dinámicamente -->
      </div>
    </section>
    <section id="contacto" data-aos="fade-up" aria-labelledby="contact-title">
      <h2 id="contact-title">📍 Contacto</h2>
      <div class="contact-container">
        <div class="contact-info">
          <h3 id="contacto-titulo">Encuéntranos</h3>
          <div class="contact-details">
            <p><i class="fas fa-map-marker-alt"></i> <span id="contacto-direccion">Calle 123 #45-67, Bogotá, Colombia</span></p>
            <p><i class="fas fa-phone"></i> <span id="contacto-telefono">+593 99 304 5286</span></p>
            <p><i class="fas fa-envelope"></i> <span id="contacto-email">creatubelleza@gmail.com</span></p>
            <p><i class="fas fa-clock"></i> <span id="contacto-horario">Lunes a Sábado: 9:00 AM - 7:00 PM</span></p>
            <p><i class="fas fa-clock"></i> <span id="contacto-horario-domingo">Domingo: 10:00 AM - 5:00 PM</span></p>
          </div>
        </div>
        <div class="map-container">
          <iframe id="mapa-iframe" src="https://maps.app.goo.gl/Cb275GuUDyefj1VW8" allowfullscreen="" loading="lazy" title="Mapa de ubicación de Lis Belleza Total"></iframe>
        </div>
      </div>
    </section>
    <!-- Panel de Administración de Contenido -->
    <section id="admin-content-editor" class="admin-content-editor" data-aos="fade-up">
      <h2>📝 Administrar Contenido del Sitio</h2>
      
      <!-- Editor de Información de Reserva -->
      <div class="editor-section">
        <h4>📅 Información de Reserva</h4>
        <div class="contact-editor-grid">
          <div class="editor-form-group">
            <label for="edit-reserva-telefono">Teléfono:</label>
            <input type="text" id="edit-reserva-telefono" placeholder="+593 99 304 5286">
          </div>
          <div class="editor-form-group">
            <label for="edit-reserva-email">Email:</label>
            <input type="text" id="edit-reserva-email" placeholder="creatubelleza@gmail.com">
          </div>
        </div>
        <div class="editor-form-group contact-editor-full">
          <label for="edit-reserva-direccion">Dirección:</label>
          <input type="text" id="edit-reserva-direccion" placeholder="Calle 123 #45-67, Bogotá, Colombia">
        </div>
        <div class="editor-actions">
          <button class="editor-btn editor-btn-save" onclick="guardarReservaInfo()">Guardar Cambios</button>
          <button class="editor-btn editor-btn-cancel" onclick="cancelarEdicionReserva()">Cancelar</button>
        </div>
      </div>
      
      <!-- Editor de Contacto -->
      <div class="editor-section">
        <h4>📍 Información de Contacto</h4>
        <div class="contact-editor-grid">
          <div class="editor-form-group">
            <label for="edit-contacto-direccion">Dirección:</label>
            <input type="text" id="edit-contacto-direccion" placeholder="Calle 123 #45-67, Bogotá, Colombia">
          </div>
          <div class="editor-form-group">
            <label for="edit-contacto-telefono">Teléfono:</label>
            <input type="text" id="edit-contacto-telefono" placeholder="+593 99 304 5286">
          </div>
        </div>
        <div class="editor-form-group">
          <label for="edit-contacto-email">Email:</label>
          <input type="text" id="edit-contacto-email" placeholder="creatubelleza@gmail.com">
          </div>
        </div>
        <div class="editor-form-group">
          <label for="edit-mapa-url">URL del Mapa:</label>
          <input type="text" id="edit-mapa-url" placeholder="https://maps.app.goo.gl/...">
        </div>
        <div class="editor-actions">
          <button class="editor-btn editor-btn-save" onclick="guardarContactoInfo()">Guardar Cambios</button>
          <button class="editor-btn editor-btn-cancel" onclick="cancelarEdicionContacto()">Cancelar</button>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div class="container footer-content">
      <div class="footer-section">
        <h3>Sobre Lis Belleza Total</h3>
        <p>Especialistas en tratamientos capilares de alta calidad con productos Dipaso. Tu satisfacción es nuestra prioridad.</p>
      </div>
      <div class="footer-section">
        <h3>Servicios Capilares Destacados</h3>
        <ul>
          <li>Tratamientos de keratina profesional</li>
          <li>Corte y coloración capilar</li>
          <li>Reconstrucción capilar intensiva</li>
          <li>Alisado y botox capilar</li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Horarios de atención</h3>
        <ul>
          <li>Lunes a Sábado: 9:00 AM - 7:00 PM</li>
          <li>Domingo: 10:00 AM - 5:00 PM</li>
          <li>Festivos: 11:00 AM - 4:00 PM</li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Contacto rápido</h3>
        <ul>
          <li><i class="fas fa-phone"></i> +593 99 304 5286</li>
          <li><i class="fas fa-envelope"></i> creatubelleza@gmail.com</li>
        </ul>
      </div>
    </div>
    <div class="container footer-bottom">
      <p>&copy; 2025 Lis Belleza Total - Todos los derechos reservados | Creado con <i class="fas fa-heart" style="color: #ff69b4;"></i> para ti</p>
      <button class="trabaja-btn" onclick="openTrabajaModal()">Trabaja con Nosotros</button>
      
      <!-- Sección de inicio/cierre de sesión en el footer -->
      <div class="footer-login-section">
        <button class="footer-login-btn" id="footerLoginBtn">Iniciar Sesión</button>
        <div class="footer-user-info" id="footerUserInfo">
          <span>Bienvenido, <strong>creatubelleza</strong></span>
          <button class="footer-logout-btn" id="footerLogoutBtn">Cerrar Sesión</button>
        </div>
      </div>
    </div>
  </footer>
  
  <div class="modal" id="loginModal" role="dialog" aria-labelledby="login-modal-title" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="login-modal-title">Iniciar Sesión</h3>
        <button class="close-modal" id="closeModal" aria-label="Cerrar modal">&times;</button>
      </div>
      <form class="login-form" id="loginForm" novalidate>
        <input type="text" id="username" placeholder="Usuario" required>
        <input type="password" id="password" placeholder="Contraseña" required>
        <button type="submit" class="login-btn-form">Iniciar Sesión</button>
      </form>
    </div>
  </div>
  <div class="modal" id="trabajaModal" role="dialog" aria-labelledby="work-modal-title" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="work-modal-title">Trabaja con Nosotros</h3>
        <button class="close-modal" id="closeTrabajaModal" aria-label="Cerrar modal">&times;</button>
      </div>
      <form class="login-form" id="form-trabaja" novalidate>
        <div class="form-group">
          <label for="nombres-trabajo">Nombres:</label>
          <input type="text" id="nombres-trabajo" placeholder="Tus nombres" required>
        </div>
        <div class="form-group">
          <label for="apellidos-trabajo">Apellidos:</label>
          <input type="text" id="apellidos-trabajo" placeholder="Tus apellidos" required>
        </div>
        <div class="form-group">
          <label for="telefono-trabajo">Teléfono:</label>
          <input type="tel" id="telefono-trabajo" value="+593" placeholder="+593" required>
        </div>
        <div class="file-upload">
          <label for="cv-trabajo">CV Actualizado (PDF):</label>
          <input type="file" id="cv-trabajo" accept=".pdf" required>
          <div class="file-info" id="cv-info">No se ha seleccionado ningún archivo</div>
        </div>
        <div class="file-upload">
          <label for="cedula-trabajo">Cédula de Identidad (PDF):</label>
          <input type="file" id="cedula-trabajo" accept=".pdf" required>
          <div class="file-info" id="cedula-info">No se ha seleccionado ningún archivo</div>
        </div>
        <div class="form-group">
          <label for="comentarios-trabajo">Comentarios adicionales:</label>
          <textarea id="comentarios-trabajo" placeholder="Cuéntanos por qué te gustaría trabajar con nosotros..." rows="4"></textarea>
        </div>
        <button type="submit" class="login-btn-form">Enviar Solicitud</button>
      </form>
      <div id="mensaje-trabajo" style="display:none;margin-top:20px;padding:15px;background:#e8f5e9;border-radius:10px;text-align:center;">
        <h3>¡Solicitud enviada con éxito!</h3>
        <p>Gracias por tu interés. Nos pondremos en contacto contigo pronto.</p>
      </div>
    </div>
  </div>
  <div class="modal" id="cartModal" role="dialog" aria-labelledby="cart-modal-title" aria-hidden="true">
    <div class="modal-content cart-modal-content">
      <div class="modal-header">
        <h3 id="cart-modal-title">🛒 Tu Carrito de Compras</h3>
        <button class="close-modal" id="closeCartModal" aria-label="Cerrar modal">&times;</button>
      </div>
      <div id="cart-items-container"></div>
      <div class="cart-total" id="cart-total">Total: $0.00 USD</div>
      <div class="checkout-form" id="checkout-form">
        <h4>📦 Datos de Envío por Servientrega</h4>
        <div class="checkout-form-group"><label for="checkout-name">Nombres y Apellidos:</label><input type="text" id="checkout-name" required></div>
        <div class="checkout-form-group"><label for="checkout-phone">Teléfono:</label><input type="tel" id="checkout-phone" value="+593" required></div>
        <div class="checkout-form-group"><label for="checkout-address">Dirección de Envío:</label><input type="text" id="checkout-address" placeholder="Calle principal y número" required></div>
        <div class="checkout-form-group"><label for="checkout-city">Ciudad:</label><input type="text" id="checkout-city" placeholder="Ciudad de envío" required></div>
        <div class="checkout-form-group"><label for="checkout-notes">Observaciones:</label><textarea id="checkout-notes" placeholder="Referencias, detalles adicionales..."></textarea></div>
        <button class="cart-checkout-btn" onclick="proceedToPayment()">Comprar</button>
      </div>
      <div class="payment-info" id="payment-info">
        <h4>💳 Información de Pago</h4>
        <p>Por favor, realiza la transferencia a la siguiente cuenta bancaria:</p>
        <div class="account-details">
          <p><strong>Banco:</strong> <span>Banco Pichincha</span></p>
          <p><strong>Número de cuenta:</strong> <span>20026669966</span></p>
          <p><strong>Titular:</strong> <span>Ingrid Montes Flores</span></p>
        </div>
        <p>Una vez realizada la transferencia, envíanos el comprobante por WhatsApp para procesar tu pedido.</p>
        <button class="whatsapp-btn" id="whatsapp-payment-btn" onclick="enviarComprobanteWhatsApp()"><i class="fab fa-whatsapp"></i> Enviar Comprobante por WhatsApp</button>
      </div>
    </div>
  </div>
  
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // Configuración de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyALUQDae0xYF9e0wPN2ozrA9iFZdhXnb9U",
      authDomain: "belleza-9213a.firebaseapp.com",
      databaseURL: "https://belleza-9213a-default-rtdb.firebaseio.com",
      projectId: "belleza-9213a",
      storageBucket: "belleza-9213a.firebasestorage.app",
      messagingSenderId: "65561692115",
      appId: "1:65561692115:web:d8d17ff0646843b82ad126",
      measurementId: "G-HN1RT885R5"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Variables globales
    let productos = {};
    let imagenesGaleria = {};
    let reservas = {};
    let solicitudesTrabajo = {};
    let pedidos = {};
    let contenidoEditable = {};
    let carrito = [];
    let isLoggedIn = false;
    let currentReserva = null;

    // Sistema de notificaciones mejorado
    function mostrarNotificación(mensaje, tipo = 'success') {
      const notificacionesExistentes = document.querySelectorAll('.notification');
      notificacionesExistentes.forEach(n => n.remove());
      
      const notificación = document.createElement('div');
      notificación.className = `notification ${tipo}`;
      notificación.textContent = mensaje;
      notificación.setAttribute('role','alert');
      notificación.setAttribute('aria-live','assertive');
      
      document.body.appendChild(notificación);
      
      notificación.offsetHeight;
      
      setTimeout(() => {
        notificación.classList.add('show');
      }, 10);
      
      setTimeout(() => {
        notificación.classList.remove('show');
        setTimeout(() => {
          if (document.body.contains(notificación)) {
            document.body.removeChild(notificación);
          }
        }, 300);
      }, 3000);
    }

    // Función para verificar el estado de autenticación al cargar la página
    function verificarEstadoAutenticacion() {
      isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
      
      if (isLoggedIn) {
        mostrarPanelAdmin();
        console.log('Usuario logueado detectado, mostrando panel de administrador');
      }
      
      cargarTodosLosDatos();
    }

    // CORREGIDO: Función para cargar todos los datos con listeners en tiempo real
    function cargarTodosLosDatos() {
      console.log('Cargando todos los datos...');
      
      // Mostrar loading
      document.getElementById('loadingOverlay').classList.add('active');
      
      // Cargar productos con listener en tiempo real
      database.ref('productos').on('value', (snapshot) => {
        const datos = snapshot.val();
        if (datos) {
          productos = datos;
          renderizarTienda();
          if (isLoggedIn) renderizarPanelProductos();
          console.log('Productos actualizados:', Object.keys(productos).length);
        } else {
          productos = productosPorDefecto;
          renderizarTienda();
          if (isLoggedIn) renderizarPanelProductos();
          console.log('Usando productos por defecto');
        }
        // Ocultar loading después de cargar productos
        setTimeout(() => {
          document.getElementById('loadingOverlay').classList.remove('active');
        }, 500);
      });
      
      // Cargar galería con listener en tiempo real
      database.ref('galeria').on('value', (snapshot) => {
        const datos = snapshot.val();
        if (datos) {
          imagenesGaleria = datos;
          renderizarGaleria();
          if (isLoggedIn) cargarGaleriaAdmin();
          console.log('Galería actualizada:', Object.keys(imagenesGaleria).length);
        } else {
          imagenesGaleria = imagenesGaleriaPorDefecto;
          renderizarGaleria();
          if (isLoggedIn) cargarGaleriaAdmin();
          console.log('Usando galería por defecto');
        }
      });
      
      // Cargar contenido con listener en tiempo real
      database.ref('contenido').on('value', (snapshot) => {
        const datos = snapshot.val();
        if (datos) {
          contenidoEditable = datos;
          aplicarContenidoEditable();
          console.log('Contenido actualizado');
        } else {
          contenidoEditable = contenidoEditablePorDefecto;
          aplicarContenidoEditable();
          console.log('Usando contenido por defecto');
        }
      });
      
      // Cargar datos de administrador solo si está logueado
      if (isLoggedIn) {
        console.log('Cargando datos de administrador...');
        
        database.ref('reservas').on('value', (snapshot) => {
          const datos = snapshot.val();
          reservas = datos || {};
          renderizarReservasAdmin();
          console.log('Reservas actualizadas:', Object.keys(reservas).length);
        });
        
        database.ref('solicitudes-trabajo').on('value', (snapshot) => {
          const datos = snapshot.val();
          solicitudesTrabajo = datos || {};
          renderizarSolicitudesAdmin();
          console.log('Solicitudes actualizadas:', Object.keys(solicitudesTrabajo).length);
        });
        
        database.ref('ordenes').on('value', (snapshot) => {
          const datos = snapshot.val();
          pedidos = datos || {};
          renderizarPedidosAdmin();
          console.log('Pedidos actualizados:', Object.keys(pedidos).length);
        });
      }
      
      renderizarTestimonios();
      actualizarContadorCarrito();
    }

    // Datos por defecto
    const contenidoEditablePorDefecto = {
      reservaInfo: {
        telefono: '+593 99 304 5286',
        email: 'creatubelleza@gmail.com',
        direccion: 'Calle 123 #45-67, Bogotá, Colombia'
      },
      contactoInfo: {
        direccion: 'Calle 123 #45-67, Bogotá, Colombia',
        telefono: '+593 99 304 5286',
        email: 'creatubelleza@gmail.com',
        mapaUrl: 'https://maps.app.goo.gl/Cb275GuUDyefj1VW8'
      }
    };

    const productosPorDefecto = {
      '1': {id:'1',name:'Shampoo Reparador Dipaso',price:'6.25',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/159672-800-auto?v=638705778699930000&width=800&height=auto&aspect=true',description:'Formulado con keratina y aceites naturales para reparar el cabello dañado.',badge:'Bestseller',categoria:'shampoo'},
      '2': {id:'2',name:'Acondicionador Nutritivo Dipaso',price:'5.50',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/161883-220-220?v=638840641064500000&width=220&height=220&aspect=true',description:'Enriquecido con vitaminas y proteínas que nutren profundamente.',badge:'Nuevo',categoria:'acondicionador'},
      '3': {id:'3',name:'Máscara de Tratamiento Dipaso',price:'7.50',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/160308-220-220?v=638754092827970000&width=220&height=220&aspect=true',description:'Tratamiento intensivo para reparar y revitalizar el cabello.',badge:'Premium',categoria:'tratamiento'},
      '4': {id:'4',name:'Sérum de Brillo Dipaso',price:'7.00',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/160627-220-220?v=638912128832870000&width=220&height=220&aspect=true',description:'Proporciona brillo intenso y control del frizz sin pesar.',badge:'Exclusivo',categoria:'accesorio'},
      '5': {id:'5',name:'Aceite Capilar Dipaso',price:'6.50',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/156559-220-220?v=638592493584430000&width=220&height=220&aspect=true',description:'Aceite nutritivo con argán y coco para hidratar las puntas.',badge:'Popular',categoria:'accesorio'},
      '6': {id:'6',name:'Espuma para Peinado Dipaso',price:'5.25',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/155989-220-220?v=638587487829000000&width=220&height=220&aspect=true',description:'Fija tu peinado con un acabado flexible y natural.',badge:'Tendencia',categoria:'accesorio'},
      '7': {id:'7',name:'Spray Protector Térmico Dipaso',price:'5.75',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/158525-220-220?v=638666924736970000&width=220&height=220&aspect=true',description:'Protege tu cabello de los daños causados por herramientas de calor.',badge:'Recomendado',categoria:'accesorio'},
      '8': {id:'8',name:'Kit Completo de Tratamiento Dipaso',price:'21.25',imageUrl:'https://dipasoec.vtexassets.com/arquivos/ids/159182-800-auto?v=638689307426100000&width=800&height=auto&aspect=true',description:'Incluye shampoo, acondicionador, máscara y sérum.',badge:'Pack Ahorro',categoria:'tratamiento'}
    };

    const imagenesGaleriaPorDefecto = {
      '1': {id:'1',url:'https://www.angelanapeluqueros.com/data/6306/contenidos/thumb_497886_contenidos_optimized.jpg',titulo:'Peinados Elegantes',descripcion:'Transformaciones que resaltan tu belleza natural'},
      '2': {id:'2',url:'https://www.grancasa.es/wp-content/uploads/sites/24/2018/02/productos-alisado-keratina.jpg',titulo:'Tratamiento de Keratina',descripcion:'Cabello liso y brillante por más tiempo'},
      '3': {id:'3',url:'https://termix.net/blog/wp-content/uploads/2024/10/Termix-horizontal-23.png',titulo:'Cuidado Profesional',descripcion:'Productos y técnicas de vanguardia'},
      '4': {id:'4',url:'https://distribuidorabelha.com/wp-content/uploads/2021/02/balayage-01.jpg',titulo:'Técnicas de Color',descripcion:'Mechas y balayage personalizados'},
      '5': {id:'5',url:'https://i.ytimg.com/vi/TAbgZySwUfw/maxresdefault.jpg',titulo:'Eventos Especiales',descripcion:'Peinados para momentos inolvidables'},
      '6': {id:'6',url:'https://www.univital.com.co/wp-content/uploads/2025/03/como-cuidar-el-cabello-tinturado-univital.jpg',titulo:'Cuidado Post-Tintura',descripcion:'Mantén tu color vibrante por más tiempo'},
      '7': {id:'7',url:'https://media-cdn.tripadvisor.com/media/photo-s/17/f0/6b/48/antes-y-despues-de-una.jpg',titulo:'Transformaciones',descripcion:'Resultados visibles que te encantarán'},
      '8': {id:'8',url:'https://m.media-amazon.com/images/S/aplus-media/sc/3b97d825-a09d-46c6-8760-7687a8827e23.__CR0,0,970,600_PT0_SX970_V1___.jpg',titulo:'Efecto Keratina',descripcion:'Cabello liso, brillante y manejable'}
    };

    // Inicialización
    document.addEventListener('DOMContentLoaded', () => {
      try {
        AOS.init({
          duration: 1000,
          once: true,
          disable: 'mobile'
        });
        console.log('AOS inicializado correctamente');
      } catch (error) {
        console.error('Error al inicializar AOS:', error);
      }
      
      verificarEstadoAutenticacion();
    });

    // Funciones de renderizado
    function aplicarContenidoEditable() {
      try {
        if (contenidoEditable.reservaInfo) {
          const reservaTelefono = document.getElementById('reserva-telefono');
          const reservaEmail = document.getElementById('reserva-email');
          const reservaDireccion = document.getElementById('reserva-direccion');
          
          if (reservaTelefono) reservaTelefono.textContent = contenidoEditable.reservaInfo.telefono;
          if (reservaEmail) reservaEmail.textContent = contenidoEditable.reservaInfo.email;
          if (reservaDireccion) reservaDireccion.textContent = contenidoEditable.reservaInfo.direccion;
        }
        
        if (contenidoEditable.contactoInfo) {
          const contactoDireccion = document.getElementById('contacto-direccion');
          const contactoTelefono = document.getElementById('contacto-telefono');
          const contactoEmail = document.getElementById('contacto-email');
          const mapaIframe = document.getElementById('mapa-iframe');
          
          if (contactoDireccion) contactoDireccion.textContent = contenidoEditable.contactoInfo.direccion;
          if (contactoTelefono) contactoTelefono.textContent = contenidoEditable.contactoInfo.telefono;
          if (contactoEmail) contactoEmail.textContent = contenidoEditable.contactoInfo.email;
          if (mapaIframe) mapaIframe.src = contenidoEditable.contactoInfo.mapaUrl;
        }
      } catch (error) {
        console.error('Error al aplicar contenido editable:', error);
      }
    }

    function renderizarTestimonios() {
      const testimoniosGrid = document.getElementById('testimonios-grid');
      if (!testimoniosGrid) return;
      
      testimoniosGrid.innerHTML = '';
      
      const testimoniosPorDefecto = [
        {
          id: 1,
          texto: 'El tratamiento de keratina con productos Dipaso dejó mi cabello súper suave y brillante. ¡Recomendadísimo!',
          autor: 'María G.',
          clienteDesde: 'Cliente desde 2023',
          iniciales: 'MG',
          rating: 5
        },
        {
          id: 2,
          texto: 'Usé los productos Dipaso en casa y mi cabello nunca se había visto mejor. El shampoo y la máscara han transformado mi cabello seco.',
          autor: 'Laura P.',
          clienteDesde: 'Cliente desde 2022',
          iniciales: 'LP',
          rating: 5
        },
        {
          id: 3,
          texto: 'El sérum de brillo Dipaso es mi producto favorito. Controla el frizz y deja mi cabello con un brillo increíble.',
          autor: 'Sofía R.',
          clienteDesde: 'Cliente desde 2024',
          iniciales: 'SR',
          rating: 4.5
        }
      ];
      
      testimoniosPorDefecto.forEach((testimonio, index) => {
        const testimonioCard = document.createElement('div');
        testimonioCard.className = 'testimonio-card';
        testimonioCard.setAttribute('data-aos','fade-up');
        testimonioCard.setAttribute('data-aos-delay',(index + 1) * 100);
        
        const estrellas = Array(5).fill(0).map((_, i) => 
          i < Math.floor(testimonio.rating) ? '<i class="fas fa-star"></i>' : 
          (i === Math.floor(testimonio.rating) && testimonio.rating % 1 !== 0 ? '<i class="fas fa-star-half-alt"></i>' : '<i class="far fa-star"></i>')
        ).join('');
        
        testimonioCard.innerHTML = `
          <div class="testimonio-rating">${estrellas}</div>
          <p class="testimonio-text">"${testimonio.texto}"</p>
          <div class="testimonio-autor">
            <div class="testimonio-avatar">${testimonio.iniciales}</div>
            <div class="testimonio-info">
              <h4>${testimonio.autor}</h4>
              <p>${testimonio.clienteDesde}</p>
            </div>
          </div>
        `;
        testimoniosGrid.appendChild(testimonioCard);
      });
    }

    // CORREGIDO: Función para renderizar la galería con manejo de errores mejorado
    function renderizarGaleria() {
      const slider = document.getElementById('galeria-slider');
      const indicatorsContainer = document.getElementById('galeria-indicators');
      if (!slider || !indicatorsContainer) return;
      
      slider.innerHTML = '';
      indicatorsContainer.innerHTML = '';
      
      // Asegurarse de que tenemos imágenes para mostrar
      if (!imagenesGaleria || Object.keys(imagenesGaleria).length === 0) {
        console.log('No hay imágenes en la galería, usando imágenes por defecto');
        imagenesGaleria = imagenesGaleriaPorDefecto;
      }
      
      Object.values(imagenesGaleria).forEach((imagen, index) => {
        const slide = document.createElement('div');
        slide.className = 'galeria-slide';
        
        // Crear elemento de imagen con manejo de errores
        const imgElement = document.createElement('img');
        imgElement.src = imagen.url;
        imgElement.alt = imagen.titulo;
        
        // Manejar errores de carga de imagen
        imgElement.onerror = function() {
          console.error('Error al cargar imagen:', imagen.url);
          // Crear un contenedor de error
          const errorDiv = document.createElement('div');
          errorDiv.className = 'img-error';
          errorDiv.innerHTML = `<i class="fas fa-image"></i><br>Imagen no disponible<br><small>${imagen.titulo}</small>`;
          this.parentNode.replaceChild(errorDiv, this);
        };
        
        slide.appendChild(imgElement);
        
        // Añadir caption
        const caption = document.createElement('div');
        caption.className = 'galeria-caption';
        caption.innerHTML = `<h3>${imagen.titulo}</h3><p>${imagen.descripcion}</p>`;
        slide.appendChild(caption);
        
        slider.appendChild(slide);
        
        // Crear indicador
        const indicator = document.createElement('div');
        indicator.className = 'galeria-indicator';
        if(index === 0) indicator.classList.add('active');
        indicator.setAttribute('role','button');
        indicator.setAttribute('tabindex','0');
        indicator.setAttribute('aria-label',`Ir a imagen ${index + 1}`);
        indicator.setAttribute('aria-current',index === 0 ? 'true' : 'false');
        indicator.addEventListener('click', () => goToSlide(index));
        indicator.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            goToSlide(index);
          }
        });
        indicatorsContainer.appendChild(indicator);
      });
      
      slides = document.querySelectorAll('.galeria-slide');
      totalSlides = slides.length;
      indicators = document.querySelectorAll('.galeria-indicator');
      
      console.log(`Galería renderizada con ${totalSlides} imágenes`);
    }

    // CORREGIDO: Función para renderizar la tienda con manejo de errores mejorado
    function renderizarTienda() {
      const tiendaGrid = document.getElementById('tienda-grid');
      if (!tiendaGrid) return;
      
      // Asegurarse de que tenemos productos para mostrar
      if (!productos || typeof productos !== 'object' || Object.keys(productos).length === 0) {
        console.log('No hay productos, usando productos por defecto');
        productos = productosPorDefecto;
      }
      
      const productosArray = Object.values(productos);
      const productosMostrar = productosArray.slice(0, 3);
      
      tiendaGrid.innerHTML = '';
      
      if (productosMostrar.length === 0) {
        tiendaGrid.innerHTML = '<p>No hay productos disponibles en este momento.</p>';
        return;
      }
      
      productosMostrar.forEach((producto, index) => {
        if (!producto.id) producto.id = `producto-${index}`;
        
        const productoCard = document.createElement('div');
        productoCard.className = 'producto-card';
        productoCard.setAttribute('data-aos','fade-up');
        productoCard.setAttribute('data-aos-delay',(index + 1) * 100);
        productoCard.setAttribute('tabindex','0');
        productoCard.setAttribute('role','article');
        productoCard.setAttribute('aria-label',`Producto: ${producto.name}, Precio: $${producto.price} USD`);
        
        // Crear contenedor de imagen
        const imagenContainer = document.createElement('div');
        imagenContainer.className = 'producto-imagen';
        
        // Crear elemento de imagen con manejo de errores
        const imgElement = document.createElement('img');
        imgElement.src = producto.imageUrl;
        imgElement.alt = producto.name;
        
        // Manejar errores de carga de imagen
        imgElement.onerror = function() {
          console.error('Error al cargar imagen de producto:', producto.imageUrl);
          // Crear un contenedor de error
          const errorDiv = document.createElement('div');
          errorDiv.className = 'img-error';
          errorDiv.innerHTML = `<i class="fas fa-image"></i><br>Imagen no disponible<br><small>${producto.name}</small>`;
          this.parentNode.replaceChild(errorDiv, this);
        };
        
        imagenContainer.appendChild(imgElement);
        
        // Añadir badge
        const badge = document.createElement('span');
        badge.className = 'producto-badge';
        badge.textContent = producto.badge || 'Nuevo';
        imagenContainer.appendChild(badge);
        
        // Crear contenedor de información
        const infoContainer = document.createElement('div');
        infoContainer.className = 'producto-info';
        infoContainer.innerHTML = `
          <h3>${producto.name}</h3>
          <p>${producto.description || 'Producto de alta calidad para el cuidado de tu cabello.'}</p>
          <div class="producto-footer">
            <span class="producto-precio">$${producto.price} USD</span>
            <button class="producto-btn" onclick="anadirAlCarrito('${producto.id}')" aria-label="Añadir ${producto.name} al carrito">Añadir al Carrito</button>
          </div>
        `;
        
        productoCard.appendChild(imagenContainer);
        productoCard.appendChild(infoContainer);
        tiendaGrid.appendChild(productoCard);
      });
      
      console.log(`Tienda renderizada con ${productosMostrar.length} productos`);
    }

    function renderizarTiendaCompleta(filtro = 'todos') {
      const tiendaModalGrid = document.getElementById('tienda-modal-grid');
      if (!tiendaModalGrid) return;
      
      // Asegurarse de que tenemos productos para mostrar
      if (!productos || typeof productos !== 'object' || Object.keys(productos).length === 0) {
        productos = productosPorDefecto;
      }
      
      let productosFiltrados = Object.values(productos);
      if(filtro !== 'todos') {
        productosFiltrados = productosFiltrados.filter(p => p.categoria === filtro);
      }
      tiendaModalGrid.innerHTML = '';
      productosFiltrados.forEach((producto, index) => {
        const productoCard = document.createElement('div');
        productoCard.className = 'producto-card';
        productoCard.setAttribute('data-aos','fade-up');
        productoCard.setAttribute('data-aos-delay',(index + 1) * 100);
        productoCard.setAttribute('tabindex','0');
        productoCard.setAttribute('role','article');
        productoCard.setAttribute('aria-label',`Producto: ${producto.name}, Precio: $${producto.price} USD`);
        
        // Crear contenedor de imagen
        const imagenContainer = document.createElement('div');
        imagenContainer.className = 'producto-imagen';
        
        // Crear elemento de imagen con manejo de errores
        const imgElement = document.createElement('img');
        imgElement.src = producto.imageUrl;
        imgElement.alt = producto.name;
        
        // Manejar errores de carga de imagen
        imgElement.onerror = function() {
          console.error('Error al cargar imagen de producto:', producto.imageUrl);
          // Crear un contenedor de error
          const errorDiv = document.createElement('div');
          errorDiv.className = 'img-error';
          errorDiv.innerHTML = `<i class="fas fa-image"></i><br>Imagen no disponible<br><small>${producto.name}</small>`;
          this.parentNode.replaceChild(errorDiv, this);
        };
        
        imagenContainer.appendChild(imgElement);
        
        // Añadir badge
        const badge = document.createElement('span');
        badge.className = 'producto-badge';
        badge.textContent = producto.badge || 'Nuevo';
        imagenContainer.appendChild(badge);
        
        // Crear contenedor de información
        const infoContainer = document.createElement('div');
        infoContainer.className = 'producto-info';
        infoContainer.innerHTML = `
          <h3>${producto.name}</h3>
          <p>${producto.description}</p>
          <div class="producto-footer">
            <span class="producto-precio">$${producto.price} USD</span>
            <button class="producto-btn" onclick="anadirAlCarrito('${producto.id}')" aria-label="Añadir ${producto.name} al carrito">Añadir al Carrito</button>
          </div>
        `;
        
        productoCard.appendChild(imagenContainer);
        productoCard.appendChild(infoContainer);
        tiendaModalGrid.appendChild(productoCard);
      });
      
      // Refrescar AOS si está disponible
      if (typeof AOS !== 'undefined') {
        AOS.refresh();
      }
      
      console.log(`Tienda completa renderizada con ${productosFiltrados.length} productos`);
    }

    function renderizarPanelAdmin() {
      try {
        document.getElementById('footerLoginBtn').style.display='none';
        document.getElementById('footerUserInfo').classList.add('active');
        document.getElementById('admin-productos').classList.add('active');
        document.getElementById('admin-galeria-controls').classList.add('active');
        document.getElementById('admin-content-editor').classList.add('active');
        document.getElementById('admin-reservas').classList.add('active');
        document.getElementById('admin-solicitudes').classList.add('active');
        document.getElementById('admin-pedidos').classList.add('active');
        renderizarPanelProductos();
        renderizarReservasAdmin();
        renderizarSolicitudesAdmin();
        renderizarPedidosAdmin();
        cargarGaleriaAdmin();
      } catch (error) {
        console.error('Error al renderizar panel admin:', error);
      }
    }

    // CORREGIDO: Función para renderizar el panel de productos
    function renderizarPanelProductos() {
      const adminLista = document.getElementById('admin-lista-productos');
      if (!adminLista) return;
      
      adminLista.innerHTML = '';
      
      if (!productos || Object.keys(productos).length === 0) {
        adminLista.innerHTML = '<p>No hay productos para administrar.</p>';
        return;
      }
      
      Object.entries(productos).forEach(([key, producto]) => {
        if (!producto.id) producto.id = key;
        
        const adminItem = document.createElement('div');
        adminItem.className = 'admin-producto-item';
        adminItem.innerHTML = `
          <h4>${producto.name}</h4>
          <div class="admin-form-grid">
            <div class="admin-form-group"><label for="name-${producto.id}">Nombre:</label><input type="text" id="name-${producto.id}" value="${producto.name}"></div>
            <div class="admin-form-group"><label for="price-${producto.id}">Precio (USD):</label><input type="text" id="price-${producto.id}" value="${producto.price}"></div>
            <div class="admin-form-group" style="grid-column: 1 / -1;"><label for="img-${producto.id}">URL de la Imagen:</label><input type="text" id="img-${producto.id}" value="${producto.imageUrl}"></div>
          </div>
          <div>
            <button class="admin-save-btn" onclick="guardarProducto('${key}')" data-id="${producto.id}">Guardar Cambios</button>
            <button class="admin-delete-btn" onclick="eliminarProducto('${key}')" data-id="${producto.id}">Eliminar Producto</button>
          </div>
        `;
        adminLista.appendChild(adminItem);
      });
    }

    // CORREGIDO: Función para guardar producto
    function guardarProducto(key) {
      const producto = productos[key];
      if (!producto) return;
      
      const nuevoNombre = document.getElementById(`name-${producto.id}`)?.value;
      const nuevaImg = document.getElementById(`img-${producto.id}`)?.value;
      const nuevoPrecio = document.getElementById(`price-${producto.id}`)?.value;
      
      if (!nuevoNombre || !nuevaImg || !nuevoPrecio) {
        mostrarNotificación('Por favor completa todos los campos', 'error');
        return;
      }
      
      actualizarElementoFirebase('productos', key, {
        name: nuevoNombre,
        imageUrl: nuevaImg,
        price: nuevoPrecio
      });
      
      mostrarMensajeAdmin('¡Producto actualizado con éxito!');
    }

    // CORREGIDO: Función para eliminar producto
    function eliminarProducto(key) {
      if(confirm('¿Estás seguro de que quieres eliminar este producto?')) {
        eliminarElementoFirebase('productos', key);
        mostrarMensajeAdmin('¡Producto eliminado con éxito!');
      }
    }

    function renderizarPedidosAdmin() {
      const tbody = document.getElementById('admin-pedidos-tbody');
      if (!tbody) return;
      
      tbody.innerHTML = '';
      
      Object.values(pedidos).forEach(pedido => {
        const row = document.createElement('tr');
        const estado = pedido.estado || 'pending';
        const estadoClass = estado === 'confirmed' ? 'confirmed' : 
                            estado === 'cancelled' ? 'cancelled' : 'pending';
        const estadoText = estado === 'confirmed' ? 'Confirmado' : 
                          estado === 'cancelled' ? 'Cancelado' : 'Pendiente';
        
        let productosHTML = '<div class="product-list-cell">';
        if (pedido.items && pedido.items.length > 0) {
          pedido.items.forEach(item => {
            productosHTML += `
              <div class="product-item">
                <div class="product-name">${item.name}</div>
                <div class="product-details">
                  <span class="product-price">$${item.price}</span>
                  <span class="product-quantity">x${item.quantity}</span>
                </div>
              </div>
            `;
          });
        } else {
          productosHTML += '<span>Sin productos</span>';
        }
        productosHTML += '</div>';
        
        row.innerHTML = `
          <td>${pedido.id}</td>
          <td>${pedido.date}</td>
          <td>${pedido.customer.name}</td>
          <td>${pedido.customer.phone}</td>
          <td>${pedido.customer.address}, ${pedido.customer.city}</td>
          <td>$${pedido.total} USD</td>
          <td><span class="status-badge ${estadoClass}">${estadoText}</span></td>
          <td>${productosHTML}</td>
          <td class="admin-actions-cell">
            <button class="delete-btn" onclick="eliminarPedido('${pedido.id}')" title="Eliminar">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    function renderizarReservasAdmin() {
      const tbody = document.getElementById('admin-reservas-tbody');
      if (!tbody) return;
      
      tbody.innerHTML = '';
      
      Object.values(reservas).forEach(reserva => {
        const row = document.createElement('tr');
        const fecha = new Date(parseInt(reserva.id)).toLocaleDateString();
        const estado = reserva.estado || 'pending';
        const estadoClass = estado === 'confirmed' ? 'confirmed' : estado === 'cancelled' ? 'cancelled' : 'pending';
        const estadoText = estado === 'confirmed' ? 'Confirmada' : estado === 'cancelled' ? 'Cancelada' : 'Pendiente';
        
        row.innerHTML = `
          <td>${fecha}</td>
          <td>${reserva.nombre}</td>
          <td>${reserva.telefono}</td>
          <td>${reserva.servicio}</td>
          <td>${reserva.fecha}</td>
          <td>${reserva.hora}</td>
          <td><span class="status-badge ${estadoClass}">${estadoText}</span></td>
          <td class="admin-actions-cell">
            <button class="delete-btn" onclick="eliminarReserva('${reserva.id}')" title="Eliminar">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    function renderizarSolicitudesAdmin() {
      const tbody = document.getElementById('admin-solicitudes-tbody');
      if (!tbody) return;
      
      tbody.innerHTML = '';
      
      Object.values(solicitudesTrabajo).forEach(solicitud => {
        const row = document.createElement('tr');
        const fecha = new Date(parseInt(solicitud.id)).toLocaleDateString();
        
        row.innerHTML = `
          <td>${fecha}</td>
          <td>${solicitud.nombres} ${solicitud.apellidos}</td>
          <td>${solicitud.telefono}</td>
          <td>${solicitud.email || 'No proporcionado'}</td>
          <td><a href="${solicitud.cvUrl}" target="_blank" class="view-btn">Ver CV</a></td>
          <td><a href="${solicitud.cedulaUrl}" target="_blank" class="view-btn">Ver Cédula</a></td>
          <td>${solicitud.comentarios || 'Sin comentarios'}</td>
          <td class="admin-actions-cell">
            <button class="delete-btn" onclick="eliminarSolicitud('${solicitud.id}')" title="Eliminar">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    // Galería
    let currentSlide = 0, slides = [], totalSlides = 0, indicators = [];
    const slider = document.getElementById('galeria-slider');
    
    function changeSlide(direction) {
      currentSlide += direction;
      if(currentSlide >= totalSlides) currentSlide = 0;
      else if(currentSlide < 0) currentSlide = totalSlides - 1;
      updateSlider();
    }
    
    function goToSlide(index) {
      currentSlide = index;
      updateSlider();
    }
    
    function updateSlider() {
      if(slider) {
        slider.style.transform = `translateX(-${currentSlide * 100}%)`;
      }
      indicators.forEach((indicator, index) => {
        indicator.classList.toggle('active', index === currentSlide);
        indicator.setAttribute('aria-current', index === currentSlide ? 'true' : 'false');
      });
    }
    
    let galleryInterval;
    function iniciarGaleriaAutoplay() {
      galleryInterval = setInterval(() => changeSlide(1), 5000);
    }
    function detenerGaleriaAutoplay() {
      clearInterval(galleryInterval);
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      const galeriaContainer = document.querySelector('.galeria-container');
      if(galeriaContainer) {
        galeriaContainer.addEventListener('mouseenter', detenerGaleriaAutoplay);
        galeriaContainer.addEventListener('mouseleave', iniciarGaleriaAutoplay);
      }
      iniciarGaleriaAutoplay();
    });

    async function añadirImagenGaleria() {
      const url = document.getElementById('galeria-img-url')?.value?.trim();
      const titulo = document.getElementById('galeria-img-title')?.value?.trim();
      
      if(!url || !titulo) {
        mostrarNotificación('Por favor, completa la URL y el título de la imagen.', 'error');
        return;
      }
      
      const descripcion = await generarDescripcionAutomatica(url);
      const descInput = document.getElementById('galeria-img-desc');
      if (descInput) descInput.value = descripcion;
      
      const nuevaImagen = {id: Date.now().toString(), url, titulo, descripcion};
      añadirElementoFirebase('galeria', nuevaImagen);
      
      const urlInput = document.getElementById('galeria-img-url');
      const titleInput = document.getElementById('galeria-img-title');
      if (urlInput) urlInput.value = '';
      if (titleInput) titleInput.value = '';
      if (descInput) descInput.value = '';
      
      mostrarNotificación('Imagen añadida a la galería con descripción automática.');
    }
    
    function eliminarImagenGaleria(id) {
      if(confirm('¿Estás seguro de que quieres eliminar esta imagen de la galería?')) {
        eliminarElementoFirebase('galeria', id);
        mostrarNotificación('Imagen eliminada de la galería.');
      }
    }
    
    function cargarGaleriaAdmin() {
      const container = document.getElementById('galeria-imagenes-admin');
      if (!container) return;
      
      container.innerHTML = '';
      
      Object.values(imagenesGaleria).forEach(imagen => {
        const item = document.createElement('div');
        item.className = 'galeria-imagen-admin-item';
        item.innerHTML = `
          <img src="${imagen.url}" alt="${imagen.titulo}" onerror="this.src='https://via.placeholder.com/150x100?text=Imagen'" />
          <button class="delete-btn" onclick="eliminarImagenGaleria('${imagen.id}')" aria-label="Eliminar imagen">
            <i class="fas fa-trash"></i>
          </button>
        `;
        container.appendChild(item);
      });
    }
    
    document.getElementById('galeria-img-url')?.addEventListener('blur', async function() {
      const url = this.value.trim();
      if(url) {
        const descripcion = await generarDescripcionAutomatica(url);
        const descInput = document.getElementById('galeria-img-desc');
        if (descInput) descInput.value = descripcion;
      }
    });
    
    async function generarDescripcionAutomatica(imageUrl) {
      try {
        const urlParts = imageUrl.split('/');
        const fileName = urlParts[urlParts.length - 1].split('.')[0];
        const descripcionesBase = {
          'hair': ['Transformación capilar profesional', 'Estilo único para tu cabello'],
          'beauty': ['Realza tu belleza natural', 'Tratamiento estético profesional'],
          'salon': ['Experiencia de salón exclusiva', 'Servicio premium de belleza'],
          'style': ['Estilo único y personalizado', 'Diseño a tu medida'],
          'cut': ['Corte preciso y moderno', 'Diseño facial personalizado'],
          'color': ['Color vibrante y duradero', 'Tincura profesional de calidad'],
          'treatment': ['Tratamiento intensivo reparador', 'Terapia capil profesional'],
          'keratin': ['Tratamiento de keratina profesional', 'Alisado duradero y natural'],
          'makeup': ['Maquillaje profesional impecable', 'Resalta tus mejores rasgos'],
          'spa': ['Experiencia spa relajante', 'Tratamiento de bienestar total']
        };
        
        let descripcionEncontrada = null;
        const urlKeywords = imageUrl.toLowerCase().match(/\b(hair|beauty|salon|style|cut|color|treatment|keratin|makeup|spa)\b/g) || [];
        
        for(const keyword of urlKeywords) {
          if(descripcionesBase[keyword]) {
            descripcionEncontrada = descripcionesBase[keyword][Math.floor(Math.random() * descripcionesBase[keyword].length)];
            break;
          }
        }
        
        if(!descripcionEncontrada) {
          const adjetivos = ['profesional', 'exclusivo', 'único', 'espectacular', 'elegante'];
          const sustantivos = ['estilo', 'diseño', 'look', 'transformación'];
          const adjetivoAleatorio = adjetivos[Math.floor(Math.random() * adjetivos.length)];
          const sustantivoAleatorio = sustantivos[Math.floor(Math.random() * sustantivos.length)];
          descripcionEncontrada = `${sustantivoAleatorio.charAt(0).toUpperCase() + sustantivoAleatorio.slice(1)} ${adjetivoAleatorio} para realzar tu belleza`;
        }
        
        return descripcionEncontrada;
      } catch(error) {
        console.error('Error generando descripción:', error);
        return 'Tratamiento profesional de belleza para realzar tu estilo único';
      }
    }

    // Carrito
    function anadirAlCarrito(productoId) {
      const id = String(productoId);
      const producto = productos[id] || Object.values(productos).find(p => String(p.id) === id);
      
      if(!producto) {
        console.error('Producto no encontrado:', productoId);
        return;
      }
      
      const itemExistente = carrito.find(item => String(item.id) === id);
      
      if(itemExistente) {
        itemExistente.quantity++;
        mostrarNotificación(`${producto.name} cantidad actualizada a ${itemExistente.quantity}`, 'info');
      } else {
        carrito.push({...producto, quantity: 1, id: id});
        mostrarNotificación(`${producto.name} añadido al carrito.`, 'success');
      }
      
      actualizarContadorCarrito();
      renderizarCarrito();
    }
    
    function actualizarContadorCarrito() {
      const cartCount = document.getElementById('cart-count');
      if (cartCount) {
        const totalItems = carrito.reduce((total, item) => total + item.quantity, 0);
        cartCount.textContent = totalItems;
      }
    }
    
    function renderizarCarrito() {
      const container = document.getElementById('cart-items-container');
      const totalEl = document.getElementById('cart-total');
      if (!container || !totalEl) return;
      
      if(carrito.length === 0) {
        container.innerHTML = '<p class="empty-cart">Tu carrito está vacío.</p>';
        totalEl.textContent = 'Total: $0.00 USD';
        const checkoutForm = document.getElementById('checkout-form');
        if (checkoutForm) checkoutForm.style.display = 'none';
        const paymentInfo = document.getElementById('payment-info');
        if (paymentInfo) paymentInfo.classList.remove('active');
        return;
      }
      container.innerHTML = '';
      let total = 0;
      carrito.forEach((item, index) => {
        const itemTotal = parseFloat(item.price) * item.quantity;
        total += itemTotal;
        const itemEl = document.createElement('div');
        itemEl.className = 'cart-item';
        itemEl.setAttribute('role','listitem');
        itemEl.setAttribute('data-product-id', item.id);
        
        itemEl.innerHTML = `
          <img src="${item.imageUrl}" alt="${item.name}" onerror="this.src='https://via.placeholder.com/60x60?text=Producto'" />
          <div class="cart-item-details">
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-price">$${item.price} USD c/u</div>
          </div>
          <div class="cart-item-quantity">
            <button onclick="cambiarCantidad('${item.id}', -1)" ${item.quantity <= 1 ? 'disabled' : ''} aria-label="Reducir cantidad">−</button>
            <span>${item.quantity}</span>
            <button onclick="cambiarCantidad('${item.id}', 1)" ${item.quantity >= 99 ? 'disabled' : ''} aria-label="Aumentar cantidad">+</button>
          </div>
          <button class="cart-remove-btn" onclick="eliminarDelCarrito('${item.id}')" aria-label="Eliminar del carrito">Eliminar</button>
        `;
        container.appendChild(itemEl);
      });
      totalEl.textContent = `Total: $${total.toFixed(2)} USD`;
      const checkoutForm = document.getElementById('checkout-form');
      if (checkoutForm) checkoutForm.style.display = 'block';
    }
    
    function cambiarCantidad(productoId, cambio) {
      const id = String(productoId);
      const item = carrito.find(item => String(item.id) === id);
      
      if(item) {
        const nuevaCantidad = item.quantity + cambio;
        if(nuevaCantidad >= 1 && nuevaCantidad <= 99) {
          item.quantity = nuevaCantidad;
          actualizarContadorCarrito();
          renderizarCarrito();
          
          const itemElement = document.querySelector(`[data-product-id="${id}"]`);
          if(itemElement) {
            itemElement.classList.add('cart-item-updating');
            setTimeout(() => {
              itemElement.classList.remove('cart-item-updating');
            }, 300);
          }
        }
      }
    }
    
    function eliminarDelCarrito(productoId) {
      const id = String(productoId);
      
      if(confirm('¿Estás seguro de que quieres eliminar este producto del carrito?')) {
        carrito = carrito.filter(item => String(item.id) !== id);
        renderizarCarrito();
        actualizarContadorCarrito();
        mostrarNotificación('Producto eliminado del carrito', 'info');
      }
    }
    
    function proceedToPayment() {
      const name = document.getElementById('checkout-name')?.value?.trim();
      const phone = document.getElementById('checkout-phone')?.value?.trim();
      const address = document.getElementById('checkout-address')?.value?.trim();
      const city = document.getElementById('checkout-city')?.value?.trim();
      const notes = document.getElementById('checkout-notes')?.value?.trim();
      
      if(!name || !phone || !address || !city) {
        mostrarNotificación('Por favor, completa todos los campos obligatorios.', 'error');
        return;
      }
      
      let total = 0;
      carrito.forEach(item => { total += parseFloat(item.price) * item.quantity; });
      const nuevoPedido = {
        id: Date.now().toString(),
        date: new Date().toLocaleString(),
        customer: { name, phone, address, city, notes },
        items: carrito,
        total: total.toFixed(2),
        estado: 'pending'
      };
      añadirElementoFirebase('ordenes', nuevoPedido);
      
      const paymentInfo = document.getElementById('payment-info');
      if (paymentInfo) {
        paymentInfo.classList.add('active');
        paymentInfo.style.display = 'block';
        paymentInfo.style.visibility = 'visible';
        paymentInfo.style.opacity = '1';
        paymentInfo.style.position = 'relative';
        paymentInfo.style.zIndex = '1000';
        
        const totalElement = document.createElement('div');
        totalElement.style.fontSize = '1.3rem';
        totalElement.style.fontWeight = '700';
        totalElement.style.color = '#2e7d32';
        totalElement.style.marginBottom = '15px';
        totalElement.innerHTML = `Total a pagar: <strong>$${total.toFixed(2)} USD</strong>`;
        
        const accountDetails = paymentInfo.querySelector('.account-details');
        if (accountDetails) paymentInfo.insertBefore(totalElement, accountDetails);
        
        const checkoutForm = document.getElementById('checkout-form');
        if (checkoutForm) checkoutForm.style.display = 'none';
        
        setTimeout(() => { paymentInfo.scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 100);
      }
      
      carrito = [];
      actualizarContadorCarrito();
      renderizarCarrito();
    }
    
    function enviarComprobanteWhatsApp() {
      const name = document.getElementById('checkout-name')?.value?.trim();
      const phone = document.getElementById('checkout-phone')?.value?.trim();
      const address = document.getElementById('checkout-address')?.value?.trim();
      const city = document.getElementById('checkout-city')?.value?.trim();
      const notes = document.getElementById('checkout-notes')?.value?.trim();
      
      let mensaje = `Hola, soy ${name} y he realizado un pedido con los siguientes productos:\n\n`;
      
      const ultimoPedido = Object.values(pedidos).sort((a, b) => {
        return new Date(b.date) - new Date(a.date);
      })[0];
      
      if (ultimoPedido && ultimoPedido.items) {
        ultimoPedido.items.forEach(item => {
          mensaje += `- ${item.name} (x${item.quantity}) - $${item.price} USD c/u\n`;
        });
        mensaje += `\nTotal: $${ultimoPedido.total} USD\n\n`;
      }
      
      mensaje += `Datos de envío (Servientrega):\n`;
      mensaje += `Teléfono: ${phone}\n`;
      mensaje += `Dirección: ${address}\n`;
      mensaje += `Ciudad: ${city}\n`;
      if(notes) mensaje += `Observaciones: ${notes}\n`;
      mensaje += `\nHe realizado la transferencia al Banco Pichincha, cuenta 20026669966 a nombre de Ingrid Montes Flores y adjunto el comprobante.`;
      
      const encodedMensaje = encodeURIComponent(mensaje);
      window.open(`https://wa.me/5939930452286?text=${encodedMensaje}`, '_blank');
    }
    
    function toggleCart() {
      const modal = document.getElementById('cartModal');
      if (!modal) return;
      
      const isActive = modal.classList.contains('active');
      if(isActive) {
        modal.classList.remove('active');
        modal.setAttribute('aria-hidden','true');
      } else {
        modal.classList.add('active');
        modal.setAttribute('aria-hidden','false');
        renderizarCarrito();
        const checkoutForm = document.getElementById('checkout-form');
        if (checkoutForm) checkoutForm.style.display = 'block';
        const paymentInfo = document.getElementById('payment-info');
        if (paymentInfo) {
          paymentInfo.classList.remove('active');
          paymentInfo.style.display = 'none';
        }
        const checkoutFormElement = document.getElementById('checkout-form');
        if (checkoutFormElement) checkoutFormElement.reset();
      }
    }

    // Menú móvil
    const menuToggle = document.getElementById('menuToggle');
    const navMobile = document.getElementById('navMobile');
    if (menuToggle && navMobile) {
      menuToggle.addEventListener('click', () => {
        const isActive = navMobile.classList.contains('active');
        navMobile.classList.toggle('active');
        menuToggle.setAttribute('aria-expanded', !isActive);
        const icon = menuToggle.querySelector('i');
        if (icon) {
          icon.classList.toggle('fa-bars');
          icon.classList.toggle('fa-times');
        }
      });
      
      document.querySelectorAll('.nav-mobile a').forEach(link => {
        link.addEventListener('click', () => {
          navMobile.classList.remove('active');
          if (menuToggle) {
            menuToggle.setAttribute('aria-expanded','false');
            const icon = menuToggle.querySelector('i');
            if (icon) {
              icon.classList.add('fa-bars');
              icon.classList.remove('fa-times');
            }
          }
        });
      });
    }

    // Login
    const footerLoginBtn = document.getElementById('footerLoginBtn');
    const loginModal = document.getElementById('loginModal');
    const closeModal = document.getElementById('closeModal');
    const loginForm = document.getElementById('loginForm');
    const footerUserInfo = document.getElementById('footerUserInfo');
    const footerLogoutBtn = document.getElementById('footerLogoutBtn');
    
    if (footerLoginBtn) {
      footerLoginBtn.addEventListener('click', () => {
        if (loginModal) {
          loginModal.classList.add('active');
          loginModal.setAttribute('aria-hidden','false');
          setTimeout(() => {
            const usernameInput = document.getElementById('username');
            if (usernameInput) usernameInput.focus();
          }, 300);
        }
      });
    }
    
    if (closeModal) {
      closeModal.addEventListener('click', () => {
        if (loginModal) {
          loginModal.classList.remove('active');
          loginModal.setAttribute('aria-hidden','true');
        }
      });
    }
    
    window.addEventListener('click', (e) => {
      if(e.target === loginModal) {
        if (loginModal) {
          loginModal.classList.remove('active');
          loginModal.setAttribute('aria-hidden','true');
        }
      }
    });
    
    if (loginForm) {
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const username = document.getElementById('username')?.value;
        const password = document.getElementById('password')?.value;
        if(username === 'creatubelleza' && password === 'montes9828') {
          if (loginModal) {
            loginModal.classList.remove('active');
            loginModal.setAttribute('aria-hidden','true');
          }
          localStorage.setItem('isLoggedIn', 'true');
          isLoggedIn = true;
          renderizarPanelAdmin();
          if (loginForm) loginForm.reset();
          cargarTodosLosDatos();
        } else {
          mostrarNotificación('Usuario o contraseña incorrectos', 'error');
          if (loginForm) loginForm.reset();
        }
      });
    }
    
    if (footerLogoutBtn) {
      footerLogoutBtn.addEventListener('click', () => {
        localStorage.removeItem('isLoggedIn');
        if (footerLoginBtn) footerLoginBtn.style.display = 'block';
        if (footerUserInfo) footerUserInfo.classList.remove('active');
        
        const adminPanels = ['admin-productos', 'admin-galeria-controls', 'admin-content-editor', 'admin-reservas', 'admin-solicitudes', 'admin-pedidos'];
        adminPanels.forEach(id => {
          const panel = document.getElementById(id);
          if (panel) panel.classList.remove('active');
        });
        
        isLoggedIn = false;
        if (loginForm) loginForm.reset();
      });
    }

    // Reservas
    const form = document.getElementById('form-reserva');
    const confirmacionReserva = document.getElementById('confirmacion-reserva');
    const telefonoInput = document.getElementById('telefono');
    
    if (telefonoInput) {
      telefonoInput.addEventListener('input', function(e) {
        if(e.target.value.length < 4 || e.target.value.substring(0,4) !== '+593') {
          e.target.value = '+593';
        }
      });
    }
    
    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        const nombre = form.nombre?.value?.trim();
        const telefono = form.telefono?.value?.trim();
        const servicio = form.servicio?.value;
        const fecha = form.fecha?.value;
        const hora = form.hora?.value;
        
        if(!nombre || !telefono || !servicio || !fecha || !hora) {
          mostrarNotificación('Por favor completa todos los campos.', 'error');
          return;
        }
        
        const nuevaReserva = {
          id: Date.now().toString(),
          nombre,
          telefono,
          servicio,
          fecha,
          hora,
          estado: 'pending'
        };
        añadirElementoFirebase('reservas', nuevaReserva);
        
        currentReserva = nuevaReserva;
        
        if (confirmacionReserva) confirmacionReserva.classList.add('active');
        if (form) form.reset();
        if (telefonoInput) telefonoInput.value = '+593';
      });
    }

    function confirmarReservaWhatsApp() {
      if (!currentReserva) {
        mostrarNotificación('No hay información de reserva disponible', 'error');
        return;
      }
      
      const mensaje = `Hola, soy ${currentReserva.nombre}. Confirmo mi reserva para ${currentReserva.servicio} el día ${currentReserva.fecha} a las ${currentReserva.hora}. Mi teléfono es ${currentReserva.telefono}.`;
      const encodedMensaje = encodeURIComponent(mensaje);
      
      window.open(`https://wa.me/5939930452286?text=${encodedMensaje}`, '_blank');
    }

    // Trabaja con nosotros
    const trabajaModal = document.getElementById('trabajaModal');
    const closeTrabajaModal = document.getElementById('closeTrabajaModal');
    const formTrabaja = document.getElementById('form-trabaja');
    const mensajeTrabajo = document.getElementById('mensaje-trabajo');
    const telefonoTrabajoInput = document.getElementById('telefono-trabajo');
    
    const cvTrabajoInput = document.getElementById('cv-trabajo');
    const cedulaTrabajoInput = document.getElementById('cedula-trabajo');
    
    if (cvTrabajoInput) {
      cvTrabajoInput.addEventListener('change', function(e) {
        const fileName = e.target.files[0]?.name || 'No se ha seleccionado ningún archivo';
        const cvInfo = document.getElementById('cv-info');
        if (cvInfo) cvInfo.textContent = fileName;
      });
    }
    
    if (cedulaTrabajoInput) {
      cedulaTrabajoInput.addEventListener('change', function(e) {
        const fileName = e.target.files[0]?.name || 'No se ha seleccionado ningún archivo';
        const cedulaInfo = document.getElementById('cedula-info');
        if (cedulaInfo) cedulaInfo.textContent = fileName;
      });
    }
    
    function openTrabajaModal() {
      if (trabajaModal) {
        trabajaModal.classList.add('active');
        trabajaModal.setAttribute('aria-hidden','false');
        setTimeout(() => {
          const nombresInput = document.getElementById('nombres-trabajo');
          if (nombresInput) nombresInput.focus();
        }, 300);
      }
    }
    
    if (closeTrabajaModal) {
      closeTrabajaModal.addEventListener('click', () => {
        if (trabajaModal) {
          trabajaModal.classList.remove('active');
          trabajaModal.setAttribute('aria-hidden','true');
        }
      });
    }
    
    window.addEventListener('click', (e) => {
      if(e.target === trabajaModal) {
        if (trabajaModal) {
          trabajaModal.classList.remove('active');
          trabajaModal.setAttribute('aria-hidden','true');
        }
      }
    });
    
    if (telefonoTrabajoInput) {
      telefonoTrabajoInput.addEventListener('input', function(e) {
        if(e.target.value.length < 4 || e.target.value.substring(0,4) !== '+593') {
          e.target.value = '+593';
        }
      });
    }
    
    if (formTrabaja) {
      formTrabaja.addEventListener('submit', async function(e) {
        e.preventDefault();
        const nombres = formTrabaja['nombres-trabajo']?.value?.trim();
        const apellidos = formTrabaja['apellidos-trabajo']?.value?.trim();
        const telefono = formTrabaja['telefono-trabajo']?.value?.trim();
        const comentarios = formTrabaja['comentarios-trabajo']?.value?.trim();
        const cvFile = document.getElementById('cv-trabajo')?.files?.[0];
        const cedulaFile = document.getElementById('cedula-trabajo')?.files?.[0];
        
        if(!nombres || !apellidos || !telefono || !cvFile || !cedulaFile) {
          mostrarNotificación('Por favor, completa todos los campos obligatorios.', 'error');
          return;
        }
        
        try {
          const cvBase64 = await leerArchivoComoBase64(cvFile);
          const cedulaBase64 = await leerArchivoComoBase64(cedulaFile);
          
          const nuevaSolicitud = {
            id: Date.now().toString(),
            nombres,
            apellidos,
            telefono,
            comentarios,
            cvNombre: cvFile.name,
            cvUrl: cvBase64,
            cedulaNombre: cedulaFile.name,
            cedulaUrl: cedulaBase64,
            fecha: new Date().toLocaleDateString()
          };
          
          añadirElementoFirebase('solicitudes-trabajo', nuevaSolicitud);
          if (mensajeTrabajo) mensajeTrabajo.style.display = 'block';
          if (formTrabaja) formTrabaja.reset();
          if (telefonoTrabajoInput) telefonoTrabajoInput.value = '+593';
          const cvInfo = document.getElementById('cv-info');
          const cedulaInfo = document.getElementById('cedula-info');
          if (cvInfo) cvInfo.textContent = 'No se ha seleccionado ningún archivo';
          if (cedulaInfo) cedulaInfo.textContent = 'No se ha seleccionado ningún archivo';
          setTimeout(() => {
            if (mensajeTrabajo) mensajeTrabajo.style.display = 'none';
          }, 5000);
        } catch(error) {
          mostrarNotificación('Error al procesar los archivos. Intenta de nuevo.', 'error');
        }
      });
    }

    // Formulario añadir producto
    const formAgregarProducto = document.getElementById('form-agregar-producto');
    if (formAgregarProducto) {
      formAgregarProducto.addEventListener('submit', function(e) {
        e.preventDefault();
        const nombre = document.getElementById('new-name')?.value?.trim();
        const precio = document.getElementById('new-price')?.value?.trim();
        const imagen = document.getElementById('new-image')?.value?.trim();
        
        if(!nombre || !precio || !imagen) {
          mostrarNotificación('Por favor, completa todos los campos para añadir el producto.', 'error');
          return;
        }
        
        const descripcion = generarDescripcionProducto(nombre);
        const categoria = determinarCategoria(nombre);
        
        const nuevoProducto = {
          id: Date.now().toString(),
          name: nombre,
          price: precio,
          imageUrl: imagen,
          description: descripcion,
          badge: 'Nuevo',
          categoria: categoria
        };
        
        const nuevoId = añadirElementoFirebase('productos', nuevoProducto);
        productos[nuevoId] = nuevoProducto;
        
        if (formAgregarProducto) formAgregarProducto.reset();
        mostrarMensajeAdmin('¡Producto añadido con éxito y descripción generada automáticamente!');
      });
    }
    
    function generarDescripcionProducto(nombreProducto) {
      const nombreLower = nombreProducto.toLowerCase();
      
      const descripciones = {
        'shampoo': 'Formulado con ingredientes naturales que limpian suavemente el cabello sin resecarlo.',
        'acondicionador': 'Enriquecido con vitaminas y agentes hidratantes que desenredanan y suavizan el cabello.',
        'máscara': 'Tratamiento profundo que repara y reconstruye la fibra capilar desde el interior.',
        'sérum': 'Producto ligero que sella las cutículas y suaviza el cabello sin frizz.',
        'aceite': 'Aceite nutritivo que hidrata, suaviza y aporta brillo al cabello.',
        'kit': 'Set completo que incluye todos los productos necesarios para un tratamiento integral.',
        'spray': 'Producto de aplicación fácil que protege el cabello del calor y los daños ambientales.',
        'tratamiento': 'Solución completa para abordar problemas específicos del cabello.',
        'protector': 'Barrera protectora contra los daños del sol, el calor y la contaminación.',
        'reparador': 'Fórmula avanzada que repara la estructura interna del cabello.',
        'nutritivo': 'Combinación de vitaminas, minerales y proteínas que nutren el cabello.',
        'brillo': 'Producto diseñado para intensificar el brillo natural del cabello.',
        'keratina': 'Tratamiento profesional que alisa y suaviza el cabello, eliminando el frizz.',
        'botox': 'Tratamiento que relaja y alisa el cabello sin químicos agresivos.',
        'reconstrucción': 'Tratamiento intensivo que repara el cabello severamente dañado.',
        'alisado': 'Procedimiento que transforma el cabello rizado en liso y suave.',
        'peinado': 'Producto para estilizar y mantener el peinado en su lugar.',
        'mechas': 'Técnica de coloración que crea luces y sombras naturales en el cabello.',
        'balayage': 'Técnica de coloración libre que crea un efecto de degradado natural.',
        'cuidado': 'Línea completa de productos diseñados para mantener el cabello saludable.',
        'profesional': 'Producto de uso profesional que garantiza resultados de salon de alta calidad.',
        'intensivo': 'Tratamiento concentrado con ingredientes activos para resultados visibles.',
        'hidratante': 'Fórmula rica en agentes humectantes que restauran la hidratación del cabello.',
        'volumen': 'Producto que aumenta el grosor y la densidad del cabello.',
        'suave': 'Tratamiento que alisa y relaja el cabello, eliminando el frizz.',
        'control': 'Producto que ayuda a controlar el frizz y mantener el peinado.',
        'eficaz': 'Solución rápida y eficiente para resolver problemas comunes del cabello.',
        'calidad': 'Producto de alta gama formulado con los mejores ingredientes.'
      };
      
      for(const clave in descripciones) {
        if(nombreLower.includes(clave)) return descripciones[clave];
      }
      
      return `Producto profesional de alta calidad diseñado para satisfacer tus necesidades capilares.`;
    }
    
    function determinarCategoria(nombreProducto) {
      const nombreLower = nombreProducto.toLowerCase();
      if(nombreLower.includes('shampoo')) return 'shampoo';
      if(nombreLower.includes('acondicionador')) return 'acondicionador';
      if(nombreLower.includes('máscara') || nombreLower.includes('tratamiento') || 
         nombreLower.includes('keratina') || nombreLower.includes('botox')) return 'tratamiento';
      return 'accesorio';
    }

    // Editor de contenido
    function guardarReservaInfo() {
      const nuevaReservaInfo = {
        telefono: document.getElementById('edit-reserva-telefono')?.value,
        email: document.getElementById('edit-reserva-email')?.value,
        direccion: document.getElementById('edit-reserva-direccion')?.value
      };
      
      actualizarElementoFirebase('contenido', 'reservaInfo', nuevaReservaInfo);
      contenidoEditable.reservaInfo = nuevaReservaInfo;
      aplicarContenidoEditable();
      mostrarNotificación('Información de reserva actualizada con éxito.');
    }
    
    function guardarContactoInfo() {
      const nuevaContactoInfo = {
        direccion: document.getElementById('edit-contacto-direccion')?.value,
        telefono: document.getElementById('edit-contacto-telefono')?.value,
        email: document.getElementById('edit-contacto-email')?.value,
        mapaUrl: document.getElementById('edit-mapa-url')?.value
      };
      
      actualizarElementoFirebase('contenido', 'contactoInfo', nuevaContactoInfo);
      contenidoEditable.contactoInfo = nuevaContactoInfo;
      aplicarContenidoEditable();
      mostrarNotificación('Información de contacto actualizada con éxito.');
    }
    
    function cancelarEdicionReserva() {
      if (contenidoEditable.reservaInfo) {
        const editReservaTelefono = document.getElementById('edit-reserva-telefono');
        const editReservaEmail = document.getElementById('edit-reserva-email');
        const editReservaDireccion = document.getElementById('edit-reserva-direccion');
        
        if (editReservaTelefono) editReservaTelefono.value = contenidoEditable.reservaInfo.telefono;
        if (editReservaEmail) editReservaEmail.value = contenidoEditable.reservaInfo.email;
        if (editReservaDireccion) editReservaDireccion.value = contenidoEditable.reservaInfo.direccion;
      }
    }
    
    function cancelarEdicionContacto() {
      if (contenidoEditable.contactoInfo) {
        const editContactoDireccion = document.getElementById('edit-contacto-direccion');
        const editContactoTelefono = document.getElementById('edit-contacto-telefono');
        const editContactoEmail = document.getElementById('edit-contacto-email');
        const editMapaUrl = document.getElementById('edit-mapa-url');
        
        if (editContactoDireccion) editContactoDireccion.value = contenidoEditable.contactoInfo.direccion;
        if (editContactoTelefono) editContactoTelefono.value = contenidoEditable.contactoInfo.telefono;
        if (editContactoEmail) editContactoEmail.value = contenidoEditable.contactoInfo.email;
        if (editMapaUrl) editMapaUrl.value = contenidoEditable.contactoInfo.mapaUrl;
      }
    }

    // Event listeners para modales
    const closeCartModal = document.getElementById('closeCartModal');
    if (closeCartModal) {
      closeCartModal.addEventListener('click', () => {
        const cartModal = document.getElementById('cartModal');
        if (cartModal) {
          cartModal.classList.remove('active');
          cartModal.setAttribute('aria-hidden','true');
        }
      });
    }
    
    const closeTiendaModal = document.getElementById('closeTiendaModal');
    if (closeTiendaModal) {
      closeTiendaModal.addEventListener('click', () => {
        const tiendaModal = document.getElementById('tiendaModal');
        if (tiendaModal) {
          tiendaModal.classList.remove('active');
          tiendaModal.setAttribute('aria-hidden','true');
        }
      });
    }
    
    window.addEventListener('click', (e) => {
      const cartModal = document.getElementById('cartModal');
      const tiendaModal = document.getElementById('tiendaModal');
      
      if(e.target === cartModal) {
        if (cartModal) {
          cartModal.classList.remove('active');
          cartModal.setAttribute('aria-hidden','true');
        }
      }
      if(e.target === tiendaModal) {
        if (tiendaModal) {
          tiendaModal.classList.remove('active');
          tiendaModal.setAttribute('aria-hidden','true');
        }
      }
    });

    // Funciones auxiliares
    function abrirTiendaCompleta() {
      const modal = document.getElementById('tiendaModal');
      if (modal) {
        modal.classList.add('active');
        modal.setAttribute('aria-hidden','false');
        renderizarTiendaCompleta();
      }
    }
    
    function filtrarProductos(categoria) {
      document.querySelectorAll('.filtro-btn').forEach(btn => btn.classList.remove('active'));
      if (event && event.target) {
        event.target.classList.add('active');
        renderizarTiendaCompleta(categoria);
      }
    }
    
    function eliminarPedido(id) {
      if(confirm('¿Estás seguro de que quieres eliminar este pedido?')) {
        eliminarElementoFirebase('ordenes', id);
        mostrarNotificación('Pedido eliminado con éxito.');
      }
    }
    
    function eliminarReserva(id) {
      if(confirm('¿Estás seguro de que quieres eliminar esta reserva?')) {
        eliminarElementoFirebase('reservas', id);
        mostrarNotificación('Reserva eliminada con éxito.');
      }
    }
    
    function eliminarSolicitud(id) {
      if(confirm('¿Estás seguro de que quieres eliminar esta solicitud?')) {
        eliminarElementoFirebase('solicitudes-trabajo', id);
        mostrarNotificación('Solicitud eliminada con éxito.');
      }
    }
    
    function mostrarMensajeAdmin(mensaje) {
      const messageEl = document.getElementById('admin-message');
      if (messageEl) {
        messageEl.textContent = mensaje;
        messageEl.style.display = 'block';
        setTimeout(() => { 
          messageEl.style.display = 'none'; 
        }, 3000);
      }
    }
    
    function validarFormulario(form) {
      let isValid = true;
      const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
      inputs.forEach(input => {
        if(!input.value.trim()) {
          isValid = false;
          input.style.borderColor = '#f44336';
          input.addEventListener('input', function() {
            if(this.value.trim()) this.style.borderColor = '';
          }, { once: true });
        } else {
          input.style.borderColor = '';
        }
      });
      return isValid;
    }
    
    if (form) {
      form.addEventListener('submit', function(e) {
        if(!validarFormulario(this)) {
          e.preventDefault();
          mostrarNotificación('Por favor, completa todos los campos obligatorios.', 'error');
        }
      });
    }
    
    if (formTrabaja) {
      formTrabaja.addEventListener('submit', function(e) {
        if(!validarFormulario(this)) {
          e.preventDefault();
          mostrarNotificación('Por favor, completa todos los campos obligatorios.', 'error');
        }
      });
    }

    // Navegación suave
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        if(targetId === '#') return;
        const target = document.querySelector(targetId);
        if(target) {
          const headerOffset = 80;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageY - headerOffset;
          window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
        }
      });
    });
    
    // Efecto scroll header
    window.addEventListener('scroll', function() {
      const header = document.querySelector('header');
      if(header) {
        if(window.scrollY > 50) {
          header.style.background = 'linear-gradient(135deg, rgba(255,105,180,0.95), rgba(214,138,177,0.95))';
        } else {
          header.style.background = 'linear-gradient(135deg,var(--p),var(--s))';
        }
      }
    });

    // Funciones de Firebase
    function añadirElementoFirebase(ruta, elemento) {
      const nuevaRuta = database.ref(ruta).push();
      nuevaRuta.set(elemento);
      return nuevaRuta.key;
    }

    function actualizarElementoFirebase(ruta, id, datosActualizados) {
      database.ref(`${ruta}/${id}`).update(datosActualizados);
    }

    function eliminarElementoFirebase(ruta, id) {
      database.ref(`${ruta}/${id}`).remove();
    }

    function leerArchivoComoBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    // Inicializar Firebase sin sobreescribir datos existentes
    function inicializarFirebase() {
      database.ref().once('value').then(snapshot => {
        const datos = snapshot.val();
        if (!datos || !datos.productos) {
          database.ref('productos').set(productosPorDefecto);
          console.log('Productos por defecto creados');
        }
        if (!datos || !datos.galeria) {
          database.ref('galeria').set(imagenesGaleriaPorDefecto);
          console.log('Galería por defecto creada');
        }
        if (!datos || !datos.contenido) {
          database.ref('contenido').set(contenidoEditablePorDefecto);
          console.log('Contenido por defecto creado');
        }
      }).catch(error => {
        console.error("Error al inicializar Firebase:", error);
      });
    }
    
    // Inicializar cuando todo esté listo
    window.addEventListener('load', () => {
      inicializarFirebase();
      
      // Forzar la carga inicial de datos si no se cargan después de 3 segundos
      setTimeout(() => {
        if (Object.keys(productos).length === 0) {
          console.log('Forzando carga de productos por defecto');
          productos = productosPorDefecto;
          renderizarTienda();
        }
        
        if (Object.keys(imagenesGaleria).length === 0) {
          console.log('Forzando carga de galería por defecto');
          imagenesGaleria = imagenesGaleriaPorDefecto;
          renderizarGaleria();
        }
      }, 3000);
    });
  </script>
</body>
</html>
